<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mapa de Calor - Acidentes de Tr√¢nsito - Recife 2024</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            overflow: hidden;
        }
        #container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        #header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
        }
        h1 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 24px;
        }
        #filtroMicro {
            margin: 10px 0;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        select, input[type="text"] {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }
        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: #e74c3c;
        }
        input[type="text"] {
            min-width: 250px;
        }
        button {
            padding: 8px 16px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover {
            background: #c0392b;
        }
        #legenda {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            font-size: 13px;
            align-items: center;
            flex-wrap: wrap;
        }
        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legenda-gradiente {
            width: 250px;
            height: 20px;
            background: linear-gradient(to right,
                rgba(200, 220, 255, 0.4),
                rgba(100, 150, 255, 0.5),
                rgba(50, 200, 100, 0.6),
                rgba(255, 255, 0, 0.7),
                rgba(255, 150, 0, 0.8),
                rgba(200, 0, 0, 0.9));
            border-radius: 4px;
            border: 1px solid #999;
        }
        #canvasContainer {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: white;
        }
        canvas {
            display: block;
            cursor: grab;
        }
        canvas.dragging {
            cursor: grabbing;
        }
        #tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 13px;
            pointer-events: none;
            display: none;
            z-index: 100;
            max-width: 320px;
            line-height: 1.5;
        }
        .tooltip-title {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            padding-bottom: 5px;
        }
        .tooltip-row {
            margin: 3px 0;
        }
        .tooltip-label {
            color: #aaa;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="header">
            <h1>üöó Mapa de Calor - Acidentes de Tr√¢nsito - Recife 2024</h1>
            <div id="filtroMicro">
                <label for="selectMicro"><strong>Filtrar por Microrregi√£o:</strong></label>
                <select id="selectMicro">
                    <option value="todas">Todas as Microrregi√µes</option>
                </select>
                <label for="inputBusca"><strong>Buscar Bairro:</strong></label>
                <input type="text" id="inputBusca" placeholder="Digite o nome do bairro...">
                <button id="btnResetFiltro">Resetar Visualiza√ß√£o</button>
            </div>
            <div id="legenda">
                <span style="font-weight: bold; margin-right: 10px;">Intensidade do Mapa de Calor:</span>
                <div class="legenda-gradiente"></div>
                <span style="color: #666;">Menos acidentes ‚Üí Mais acidentes</span>
                <span style="margin-left: 20px; color: #666;">
                    | Total: 5,240 acidentes em 2024
                </span>
            </div>
        </div>
        <div id="canvasContainer">
            <canvas id="canvas"></canvas>
            <div id="tooltip"></div>
        </div>
    </div>
    <script>
        const nodes = [{"id": 0, "label": "Aflitos", "x": 4479.3161115878465, "y": 1967.6726729630489, "microrregiao": "3.1", "total_acidentes": 21, "com_vitima": 14, "sem_vitima": 7, "perc_com_vitima": 66.66666666666666, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 1, "label": "Afogados", "x": 1616.501271257427, "y": 4493.248053239174, "microrregiao": "5.1", "total_acidentes": 192, "com_vitima": 163, "sem_vitima": 26, "perc_com_vitima": 84.89583333333334, "total_acidentes_micro": 349, "perc_com_vitima_micro": 87.39255014326648}, {"id": 2, "label": "Alto Jos\u00e9 Bonif\u00e1cio", "x": 1201.5382126862903, "y": 3379.170356112978, "microrregiao": "3.2", "total_acidentes": 18, "com_vitima": 16, "sem_vitima": 2, "perc_com_vitima": 88.88888888888889, "total_acidentes_micro": 73, "perc_com_vitima_micro": 91.78082191780824}, {"id": 3, "label": "Alto Jos\u00e9 do Pinho", "x": 1076.0089619076239, "y": 3587.8187624847324, "microrregiao": "3.2", "total_acidentes": 10, "com_vitima": 9, "sem_vitima": 1, "perc_com_vitima": 90.0, "total_acidentes_micro": 73, "perc_com_vitima_micro": 91.78082191780824}, {"id": 4, "label": "Alto Santa Teresinha", "x": 1858.4685581549081, "y": 2461.727946263488, "microrregiao": "2.2", "total_acidentes": 4, "com_vitima": 1, "sem_vitima": 3, "perc_com_vitima": 25.0, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 5, "label": "Alto do Mandu", "x": 4520.503319190981, "y": 2070.570934040528, "microrregiao": "3.1", "total_acidentes": 6, "com_vitima": 6, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 6, "label": "Apipucos", "x": 3838.092229612506, "y": 2351.009344813044, "microrregiao": "3.1", "total_acidentes": 33, "com_vitima": 28, "sem_vitima": 5, "perc_com_vitima": 84.84848484848484, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 7, "label": "Areias", "x": 2794.152751108103, "y": 4615.636129915434, "microrregiao": "5.2", "total_acidentes": 103, "com_vitima": 95, "sem_vitima": 6, "perc_com_vitima": 92.23300970873788, "total_acidentes_micro": 173, "perc_com_vitima_micro": 91.90751445086704}, {"id": 8, "label": "Arruda", "x": 346.2711916894765, "y": 2097.5825139135936, "microrregiao": "2.1", "total_acidentes": 70, "com_vitima": 64, "sem_vitima": 4, "perc_com_vitima": 91.42857142857144, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 9, "label": "Barro", "x": 3973.3420904865393, "y": 4489.054574885155, "microrregiao": "5.3", "total_acidentes": 32, "com_vitima": 27, "sem_vitima": 5, "perc_com_vitima": 84.375, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 10, "label": "Beberibe", "x": 2935.8491551099683, "y": 2354.7825553237262, "microrregiao": "2.2 / 2.3", "total_acidentes": 49, "com_vitima": 47, "sem_vitima": 1, "perc_com_vitima": 95.91836734693877, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 11, "label": "Boa Viagem", "x": 1271.9506474965387, "y": 5694.374559261335, "microrregiao": "6.1", "total_acidentes": 549, "com_vitima": 483, "sem_vitima": 61, "perc_com_vitima": 87.97814207650273, "total_acidentes_micro": 1098, "perc_com_vitima_micro": 89.70856102003643}, {"id": 12, "label": "Boa Vista", "x": 2452.4327843324068, "y": 990.1956727067576, "microrregiao": "1.2", "total_acidentes": 134, "com_vitima": 95, "sem_vitima": 39, "perc_com_vitima": 70.8955223880597, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 13, "label": "Bomba do Hemet\u00e9rio", "x": 1853.2733515718385, "y": 1951.57051181808, "microrregiao": "2.2", "total_acidentes": 26, "com_vitima": 22, "sem_vitima": 2, "perc_com_vitima": 84.61538461538461, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 14, "label": "Bongi", "x": 1843.9948209317838, "y": 4438.869180102813, "microrregiao": "5.1", "total_acidentes": 48, "com_vitima": 45, "sem_vitima": 3, "perc_com_vitima": 93.75, "total_acidentes_micro": 349, "perc_com_vitima_micro": 87.39255014326648}, {"id": 15, "label": "Bras\u00edlia Teimosa", "x": 1456.5443189379848, "y": 5615.59852978458, "microrregiao": "6.1", "total_acidentes": 9, "com_vitima": 8, "sem_vitima": 1, "perc_com_vitima": 88.88888888888889, "total_acidentes_micro": 1098, "perc_com_vitima_micro": 89.70856102003643}, {"id": 16, "label": "Brejo da Guabiraba", "x": 2353.4485118026178, "y": 3202.2203871494708, "microrregiao": "3.3", "total_acidentes": 9, "com_vitima": 9, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 17, "label": "Brejo de Beberibe", "x": 2180.268318891886, "y": 3653.747607877021, "microrregiao": "3.3", "total_acidentes": 3, "com_vitima": 3, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 18, "label": "Cabanga", "x": 1999.4556902092377, "y": 930.7631045373117, "microrregiao": "1.2", "total_acidentes": 27, "com_vitima": 20, "sem_vitima": 6, "perc_com_vitima": 74.07407407407408, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 19, "label": "Cajueiro", "x": 1978.5677703177812, "y": 2041.445100562487, "microrregiao": "2.2", "total_acidentes": 18, "com_vitima": 16, "sem_vitima": 2, "perc_com_vitima": 88.88888888888889, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 20, "label": "Campina do Barreto", "x": 476.18208804978894, "y": 1964.9280185463444, "microrregiao": "2.1", "total_acidentes": 6, "com_vitima": 5, "sem_vitima": 1, "perc_com_vitima": 83.33333333333334, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 21, "label": "Campo Grande", "x": 778.0003036105189, "y": 2390.4854233301708, "microrregiao": "2.1", "total_acidentes": 116, "com_vitima": 113, "sem_vitima": 3, "perc_com_vitima": 97.41379310344828, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 22, "label": "Casa Amarela", "x": 4355.29079751321, "y": 2527.9262297120445, "microrregiao": "3.1", "total_acidentes": 152, "com_vitima": 142, "sem_vitima": 10, "perc_com_vitima": 93.42105263157896, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 23, "label": "Casa Forte", "x": 4092.0012471629734, "y": 2534.3434924100115, "microrregiao": "3.1", "total_acidentes": 67, "com_vitima": 59, "sem_vitima": 8, "perc_com_vitima": 88.05970149253731, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 24, "label": "Caxang\u00e1", "x": 543.6308544348402, "y": 4747.15677722395, "microrregiao": "4.3", "total_acidentes": 118, "com_vitima": 110, "sem_vitima": 8, "perc_com_vitima": 93.22033898305084, "total_acidentes_micro": 225, "perc_com_vitima_micro": 90.22222222222224}, {"id": 25, "label": "Ca\u00e7ote", "x": 3202.6805759522426, "y": 4626.81696671788, "microrregiao": "5.2", "total_acidentes": 2, "com_vitima": 1, "sem_vitima": 1, "perc_com_vitima": 50.0, "total_acidentes_micro": 173, "perc_com_vitima_micro": 91.90751445086704}, {"id": 26, "label": "Cidade Universit\u00e1ria", "x": 515.8602615787075, "y": 4474.182973833013, "microrregiao": "4.3", "total_acidentes": 13, "com_vitima": 11, "sem_vitima": 2, "perc_com_vitima": 84.61538461538461, "total_acidentes_micro": 225, "perc_com_vitima_micro": 90.22222222222224}, {"id": 27, "label": "Coelhos", "x": 3571.5781240152246, "y": 974.2514409933192, "microrregiao": "1.3", "total_acidentes": 9, "com_vitima": 7, "sem_vitima": 2, "perc_com_vitima": 77.77777777777779, "total_acidentes_micro": 21, "perc_com_vitima_micro": 85.71428571428571}, {"id": 28, "label": "Cohab", "x": 4200, "y": 5800, "microrregiao": "6.3", "total_acidentes": 20, "com_vitima": 19, "sem_vitima": 1, "perc_com_vitima": 95.0, "total_acidentes_micro": 20, "perc_com_vitima_micro": 95.0}, {"id": 29, "label": "Coqueiral", "x": 4332.496063445228, "y": 4406.658338290982, "microrregiao": "5.3", "total_acidentes": 6, "com_vitima": 3, "sem_vitima": 3, "perc_com_vitima": 50.0, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 30, "label": "Cordeiro", "x": 3345.3475072410247, "y": 3617.3802603231106, "microrregiao": "4.1", "total_acidentes": 116, "com_vitima": 102, "sem_vitima": 14, "perc_com_vitima": 87.93103448275862, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 31, "label": "Curado", "x": 4133.606686398923, "y": 4806.7220580570365, "microrregiao": "5.3", "total_acidentes": 6, "com_vitima": 6, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 32, "label": "C\u00f3rrego do Jenipapo", "x": 2033.7113571417074, "y": 3241.371227574621, "microrregiao": "3.3", "total_acidentes": 4, "com_vitima": 4, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 33, "label": "Derby", "x": 4173.811662369118, "y": 2552.897157190392, "microrregiao": "3.1", "total_acidentes": 93, "com_vitima": 78, "sem_vitima": 14, "perc_com_vitima": 83.87096774193549, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 34, "label": "Dois Irm\u00e3os", "x": 4222.551176422691, "y": 1825.8033430450655, "microrregiao": "3.1", "total_acidentes": 32, "com_vitima": 27, "sem_vitima": 3, "perc_com_vitima": 84.375, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 35, "label": "Dois Unidos", "x": 2907.9150309910797, "y": 2036.4345783642748, "microrregiao": "2.2 / 2.3", "total_acidentes": 30, "com_vitima": 30, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 36, "label": "Encruzilhada", "x": 385.251237084026, "y": 2284.746247703289, "microrregiao": "2.1", "total_acidentes": 80, "com_vitima": 74, "sem_vitima": 6, "perc_com_vitima": 92.5, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 37, "label": "Engenho do Meio", "x": 4445.312898390064, "y": 3386.7127086800165, "microrregiao": "4.2", "total_acidentes": 19, "com_vitima": 18, "sem_vitima": 1, "perc_com_vitima": 94.73684210526316, "total_acidentes_micro": 60, "perc_com_vitima_micro": 91.66666666666666}, {"id": 38, "label": "Espinheiro", "x": 3973.70626142966, "y": 2476.205223361227, "microrregiao": "3.1", "total_acidentes": 67, "com_vitima": 57, "sem_vitima": 10, "perc_com_vitima": 85.07462686567165, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 39, "label": "Est\u00e2ncia", "x": 2975.1392071240725, "y": 4779.159427798997, "microrregiao": "5.2", "total_acidentes": 53, "com_vitima": 48, "sem_vitima": 5, "perc_com_vitima": 90.56603773584906, "total_acidentes_micro": 173, "perc_com_vitima_micro": 91.90751445086704}, {"id": 40, "label": "Fund\u00e3o", "x": 1543.4966601878095, "y": 2113.106180738156, "microrregiao": "2.2", "total_acidentes": 13, "com_vitima": 12, "sem_vitima": 1, "perc_com_vitima": 92.3076923076923, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 41, "label": "Gra\u00e7as", "x": 3853.412879693089, "y": 2070.691672263356, "microrregiao": "3.1", "total_acidentes": 62, "com_vitima": 48, "sem_vitima": 13, "perc_com_vitima": 77.41935483870968, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 42, "label": "Guabiraba", "x": 2378.5877505995672, "y": 3576.2534878247907, "microrregiao": "3.3", "total_acidentes": 25, "com_vitima": 22, "sem_vitima": 3, "perc_com_vitima": 88.0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 43, "label": "Hip\u00f3dromo", "x": 843.9271828835449, "y": 2186.064452558542, "microrregiao": "2.1", "total_acidentes": 2, "com_vitima": 2, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 44, "label": "Ibura", "x": 3172.723312669391, "y": 5819.899931761671, "microrregiao": "6.2", "total_acidentes": 197, "com_vitima": 186, "sem_vitima": 10, "perc_com_vitima": 94.41624365482234, "total_acidentes_micro": 265, "perc_com_vitima_micro": 94.71698113207547}, {"id": 45, "label": "Ilha Joana Bezerra", "x": 3234.2802780621396, "y": 1010.1386666977768, "microrregiao": "1.3", "total_acidentes": 12, "com_vitima": 11, "sem_vitima": 1, "perc_com_vitima": 91.66666666666666, "total_acidentes_micro": 21, "perc_com_vitima_micro": 85.71428571428571}, {"id": 46, "label": "Ilha do Leite", "x": 2315.849956021024, "y": 1151.7150661653145, "microrregiao": "1.2", "total_acidentes": 41, "com_vitima": 31, "sem_vitima": 10, "perc_com_vitima": 75.60975609756098, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 47, "label": "Ilha do Retiro", "x": 3643.4498198659985, "y": 3381.4245948617126, "microrregiao": "4.1", "total_acidentes": 54, "com_vitima": 48, "sem_vitima": 6, "perc_com_vitima": 88.88888888888889, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 48, "label": "Imbiribeira", "x": 1462.6160792298824, "y": 5999.251884822954, "microrregiao": "6.1", "total_acidentes": 305, "com_vitima": 277, "sem_vitima": 27, "perc_com_vitima": 90.81967213114754, "total_acidentes_micro": 1098, "perc_com_vitima_micro": 89.70856102003643}, {"id": 49, "label": "Ipsep", "x": 1224.3107499002672, "y": 5903.3211016750865, "microrregiao": "6.1", "total_acidentes": 99, "com_vitima": 90, "sem_vitima": 8, "perc_com_vitima": 90.9090909090909, "total_acidentes_micro": 1098, "perc_com_vitima_micro": 89.70856102003643}, {"id": 50, "label": "Iputinga", "x": 3344.0900667859655, "y": 3170.9993760827874, "microrregiao": "4.1", "total_acidentes": 134, "com_vitima": 120, "sem_vitima": 13, "perc_com_vitima": 89.55223880597015, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 51, "label": "Jaqueira", "x": 4431.137389048197, "y": 2462.2052037293424, "microrregiao": "3.1", "total_acidentes": 9, "com_vitima": 7, "sem_vitima": 2, "perc_com_vitima": 77.77777777777779, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 52, "label": "Jardim S\u00e3o Paulo", "x": 3972.0695233373735, "y": 4681.5912944831125, "microrregiao": "5.3", "total_acidentes": 48, "com_vitima": 40, "sem_vitima": 8, "perc_com_vitima": 83.33333333333334, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 53, "label": "Jiqui\u00e1", "x": 3015.9500657584194, "y": 4397.703487869986, "microrregiao": "5.2", "total_acidentes": 15, "com_vitima": 15, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 173, "perc_com_vitima_micro": 91.90751445086704}, {"id": 54, "label": "Jord\u00e3o", "x": 2838.4508475241596, "y": 5773.475509989651, "microrregiao": "6.2", "total_acidentes": 68, "com_vitima": 65, "sem_vitima": 3, "perc_com_vitima": 95.58823529411764, "total_acidentes_micro": 265, "perc_com_vitima_micro": 94.71698113207547}, {"id": 55, "label": "Linha do Tiro", "x": 3183.5658274006696, "y": 2170.3899255806837, "microrregiao": "2.2 / 2.3", "total_acidentes": 26, "com_vitima": 23, "sem_vitima": 3, "perc_com_vitima": 88.46153846153845, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 56, "label": "Macaxeira", "x": 2010.0985221409444, "y": 3562.47295399023, "microrregiao": "3.3", "total_acidentes": 41, "com_vitima": 39, "sem_vitima": 2, "perc_com_vitima": 95.1219512195122, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 57, "label": "Madalena", "x": 3516.101054271944, "y": 3571.7751544996895, "microrregiao": "4.1", "total_acidentes": 174, "com_vitima": 154, "sem_vitima": 20, "perc_com_vitima": 88.50574712643679, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 58, "label": "Mangabeira", "x": 812.2759998645619, "y": 3274.8312392232483, "microrregiao": "3.2", "total_acidentes": 9, "com_vitima": 8, "sem_vitima": 1, "perc_com_vitima": 88.88888888888889, "total_acidentes_micro": 73, "perc_com_vitima_micro": 91.78082191780824}, {"id": 59, "label": "Mangueira", "x": 1626.04857005268, "y": 4697.831167264126, "microrregiao": "5.1", "total_acidentes": 10, "com_vitima": 9, "sem_vitima": 1, "perc_com_vitima": 90.0, "total_acidentes_micro": 349, "perc_com_vitima_micro": 87.39255014326648}, {"id": 60, "label": "Monteiro", "x": 3850.9026221415943, "y": 2202.2182198245278, "microrregiao": "3.1", "total_acidentes": 8, "com_vitima": 5, "sem_vitima": 3, "perc_com_vitima": 62.5, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 61, "label": "Morro da Concei\u00e7\u00e3o", "x": 1031.4269184462646, "y": 3240.289896298322, "microrregiao": "3.2", "total_acidentes": 8, "com_vitima": 7, "sem_vitima": 1, "perc_com_vitima": 87.5, "total_acidentes_micro": 73, "perc_com_vitima_micro": 91.78082191780824}, {"id": 62, "label": "Mustardinha", "x": 1850.5434476319622, "y": 4790.754543784989, "microrregiao": "5.1", "total_acidentes": 17, "com_vitima": 16, "sem_vitima": 1, "perc_com_vitima": 94.11764705882352, "total_acidentes_micro": 349, "perc_com_vitima_micro": 87.39255014326648}, {"id": 63, "label": "Nova Descoberta", "x": 2426.0186693229466, "y": 3426.19927526275, "microrregiao": "3.3", "total_acidentes": 50, "com_vitima": 45, "sem_vitima": 2, "perc_com_vitima": 90.0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 64, "label": "Paissandu", "x": 2170.782451840677, "y": 1225.5823421229238, "microrregiao": "1.2", "total_acidentes": 26, "com_vitima": 20, "sem_vitima": 6, "perc_com_vitima": 76.92307692307693, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 65, "label": "Parnamirim", "x": 4059.4573867283198, "y": 1894.6323239472017, "microrregiao": "3.1", "total_acidentes": 35, "com_vitima": 28, "sem_vitima": 6, "perc_com_vitima": 80.0, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 66, "label": "Passarinho", "x": 2220.5711152113886, "y": 3176.5599946927746, "microrregiao": "3.3", "total_acidentes": 6, "com_vitima": 6, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 67, "label": "Pau-ferro", "x": 1989.3714010381957, "y": 3408.3999855912457, "microrregiao": "3.3", "total_acidentes": 0, "com_vitima": 0, "sem_vitima": 0, "perc_com_vitima": 0, "total_acidentes_micro": 138, "perc_com_vitima_micro": 92.7536231884058}, {"id": 68, "label": "Peixinhos", "x": 649.3554447184796, "y": 1972.7433959980353, "microrregiao": "2.1", "total_acidentes": 0, "com_vitima": 0, "sem_vitima": 0, "perc_com_vitima": 0, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 69, "label": "Pina", "x": 1590.3882764120533, "y": 5782.707892326525, "microrregiao": "6.1", "total_acidentes": 136, "com_vitima": 127, "sem_vitima": 9, "perc_com_vitima": 93.38235294117648, "total_acidentes_micro": 1098, "perc_com_vitima_micro": 89.70856102003643}, {"id": 70, "label": "Ponto de Parada", "x": 481.82631991769284, "y": 2414.574392028672, "microrregiao": "2.1", "total_acidentes": 5, "com_vitima": 5, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 71, "label": "Porto da Madeira", "x": 1644.092158181032, "y": 1961.0937810761673, "microrregiao": "2.2", "total_acidentes": 11, "com_vitima": 11, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}, {"id": 72, "label": "Po\u00e7o", "x": 3922.134689188595, "y": 1941.5274738129892, "microrregiao": "3.1", "total_acidentes": 4, "com_vitima": 3, "sem_vitima": 1, "perc_com_vitima": 75.0, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 73, "label": "Prado", "x": 3226.331917403914, "y": 3278.281230967667, "microrregiao": "4.1", "total_acidentes": 38, "com_vitima": 28, "sem_vitima": 10, "perc_com_vitima": 73.68421052631578, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 74, "label": "Recife", "x": 1148.5169426859238, "y": 1002.9882156096967, "microrregiao": "1.1", "total_acidentes": 37, "com_vitima": 27, "sem_vitima": 10, "perc_com_vitima": 72.97297297297297, "total_acidentes_micro": 333, "perc_com_vitima_micro": 84.38438438438438}, {"id": 75, "label": "Rosarinho", "x": 789.3053633037632, "y": 2019.2484050793694, "microrregiao": "2.1", "total_acidentes": 26, "com_vitima": 25, "sem_vitima": 1, "perc_com_vitima": 96.15384615384616, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 76, "label": "San Martin", "x": 1972.2602517520959, "y": 4583.481840221893, "microrregiao": "5.1", "total_acidentes": 82, "com_vitima": 72, "sem_vitima": 9, "perc_com_vitima": 87.8048780487805, "total_acidentes_micro": 349, "perc_com_vitima_micro": 87.39255014326648}, {"id": 77, "label": "Sancho", "x": 4352.5595155911105, "y": 4748.661546574646, "microrregiao": "5.3", "total_acidentes": 10, "com_vitima": 9, "sem_vitima": 1, "perc_com_vitima": 90.0, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 78, "label": "Santana", "x": 4508.0511964344905, "y": 2310.5930181769168, "microrregiao": "3.1", "total_acidentes": 6, "com_vitima": 6, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 79, "label": "Santo Amaro", "x": 835.9033977364036, "y": 1022.3459824651154, "microrregiao": "1.1", "total_acidentes": 296, "com_vitima": 254, "sem_vitima": 42, "perc_com_vitima": 85.8108108108108, "total_acidentes_micro": 333, "perc_com_vitima_micro": 84.38438438438438}, {"id": 80, "label": "Santo Ant\u00f4nio", "x": 2360.0494852733946, "y": 831.1991015865481, "microrregiao": "1.2", "total_acidentes": 45, "com_vitima": 34, "sem_vitima": 11, "perc_com_vitima": 75.55555555555556, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 81, "label": "Soledade", "x": 2015.7097011184185, "y": 1111.4077485030796, "microrregiao": "1.2", "total_acidentes": 2, "com_vitima": 1, "sem_vitima": 1, "perc_com_vitima": 50.0, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 82, "label": "S\u00e3o Jos\u00e9", "x": 2142.6448524923308, "y": 783.7636576354834, "microrregiao": "1.2", "total_acidentes": 185, "com_vitima": 151, "sem_vitima": 34, "perc_com_vitima": 81.62162162162161, "total_acidentes_micro": 460, "perc_com_vitima_micro": 76.52173913043478}, {"id": 83, "label": "S\u00edtio dos Pintos", "x": 4337.801202434451, "y": 1848.1224811277448, "microrregiao": "3.1", "total_acidentes": 5, "com_vitima": 4, "sem_vitima": 1, "perc_com_vitima": 80.0, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 84, "label": "Tamarineira", "x": 4589.852256389707, "y": 2200.571577620588, "microrregiao": "3.1", "total_acidentes": 66, "com_vitima": 57, "sem_vitima": 8, "perc_com_vitima": 86.36363636363636, "total_acidentes_micro": 666, "perc_com_vitima_micro": 85.43543543543544}, {"id": 85, "label": "Tejipi\u00f3", "x": 4158.0738565156935, "y": 4372.531150497295, "microrregiao": "5.3", "total_acidentes": 37, "com_vitima": 33, "sem_vitima": 4, "perc_com_vitima": 89.1891891891892, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 86, "label": "Torre", "x": 3211.0265556895465, "y": 3508.025714139049, "microrregiao": "4.1", "total_acidentes": 87, "com_vitima": 76, "sem_vitima": 10, "perc_com_vitima": 87.35632183908046, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 87, "label": "Torre\u00e3o", "x": 666.8623428934275, "y": 2440.0066498660217, "microrregiao": "2.1", "total_acidentes": 13, "com_vitima": 10, "sem_vitima": 3, "perc_com_vitima": 76.92307692307693, "total_acidentes_micro": 318, "perc_com_vitima_micro": 93.71069182389935}, {"id": 88, "label": "Torr\u00f5es", "x": 4731.4125345064485, "y": 3396.916812869988, "microrregiao": "4.2", "total_acidentes": 41, "com_vitima": 37, "sem_vitima": 4, "perc_com_vitima": 90.2439024390244, "total_acidentes_micro": 60, "perc_com_vitima_micro": 91.66666666666666}, {"id": 89, "label": "Tot\u00f3", "x": 4446.702414018647, "y": 4604.641128715406, "microrregiao": "5.3", "total_acidentes": 17, "com_vitima": 16, "sem_vitima": 1, "perc_com_vitima": 94.11764705882352, "total_acidentes_micro": 156, "perc_com_vitima_micro": 85.8974358974359}, {"id": 90, "label": "Vasco da Gama", "x": 858.9592748147187, "y": 3516.439344528743, "microrregiao": "3.2", "total_acidentes": 28, "com_vitima": 27, "sem_vitima": 1, "perc_com_vitima": 96.42857142857144, "total_acidentes_micro": 73, "perc_com_vitima_micro": 91.78082191780824}, {"id": 91, "label": "V\u00e1rzea", "x": 747.8542084422263, "y": 4577.938710923501, "microrregiao": "4.3", "total_acidentes": 94, "com_vitima": 82, "sem_vitima": 11, "perc_com_vitima": 87.2340425531915, "total_acidentes_micro": 225, "perc_com_vitima_micro": 90.22222222222224}, {"id": 92, "label": "Zumbi", "x": 3561.9855575993824, "y": 3209.0072964799106, "microrregiao": "4.1", "total_acidentes": 6, "com_vitima": 6, "sem_vitima": 0, "perc_com_vitima": 100.0, "total_acidentes_micro": 609, "perc_com_vitima_micro": 87.68472906403942}, {"id": 93, "label": "\u00c1gua Fria", "x": 1981.8430920974865, "y": 2347.3034847589965, "microrregiao": "2.2", "total_acidentes": 99, "com_vitima": 85, "sem_vitima": 13, "perc_com_vitima": 85.85858585858585, "total_acidentes_micro": 171, "perc_com_vitima_micro": 85.96491228070175}];
        const edges = [{"from": 3, "to": 58, "label": "Rua Aripibu", "peso": 29.85}, {"from": 57, "to": 73, "label": "Praca Na Rua Joao Crescencio", "peso": 37.33}, {"from": 36, "to": 38, "label": "Rua Conselheiro Portela", "peso": 39.05}, {"from": 1, "to": 62, "label": "Rua Orlandia", "peso": 39.93}, {"from": 4, "to": 13, "label": "Rua Alto do Tiro", "peso": 41.0}, {"from": 21, "to": 70, "label": "Rua Professor Jeronimo Gueiros", "peso": 47.09}, {"from": 15, "to": 69, "label": "Rua Dentudo", "peso": 51.9}, {"from": 22, "to": 60, "label": "Rua Iguatama", "peso": 57.87}, {"from": 17, "to": 66, "label": "Avenida Presidente Cafe Filho", "peso": 58.0}, {"from": 35, "to": 66, "label": "Rua Vale Fundo", "peso": 58.94}, {"from": 56, "to": 63, "label": "Rua Nage", "peso": 62.85}, {"from": 5, "to": 60, "label": "Rua Tramandai", "peso": 66.33}, {"from": 31, "to": 52, "label": "Rua Raphael De Oliveira Alves", "peso": 68.49}, {"from": 3, "to": 13, "label": "Rua Campos Belos", "peso": 69.54}, {"from": 4, "to": 2, "label": "Rua Arlindo Cisneiros", "peso": 72.0}, {"from": 4, "to": 55, "label": "Rua Arlindo Cisneiros", "peso": 72.0}, {"from": 47, "to": 45, "label": "Avenida Beira Rio", "peso": 76.03}, {"from": 93, "to": 13, "label": "Rua Turiuba", "peso": 76.43}, {"from": 30, "to": 88, "label": "Rua Daniel Lisboa", "peso": 81.91}, {"from": 16, "to": 32, "label": "Rua Assaituba", "peso": 84.27}, {"from": 79, "to": 80, "label": "Rua Princesa Isabel", "peso": 91.36}, {"from": 80, "to": 82, "label": "Rua Do Porao", "peso": 94.58}, {"from": 17, "to": 35, "label": "Rua Izaltino Lobo", "peso": 95.66}, {"from": 38, "to": 41, "label": "Rua Conselheiro Portela", "peso": 100.77}, {"from": 39, "to": 53, "label": "Rua Cassiano", "peso": 102.45}, {"from": 28, "to": 9, "label": "Rua Jos\u00e9 Caetano", "peso": 108.0}, {"from": 28, "to": 44, "label": "Rua Jos\u00e9 Caetano", "peso": 108.0}, {"from": 17, "to": 63, "label": "Rua Urandi", "peso": 108.15}, {"from": 31, "to": 89, "label": "Rua Garcia", "peso": 108.58}, {"from": 6, "to": 56, "label": "Rua Do Banho", "peso": 109.77}, {"from": 21, "to": 43, "label": "Rua Padre Villemain", "peso": 113.6}, {"from": 16, "to": 66, "label": "Avenida Presidente Cafe Filho", "peso": 114.06}, {"from": 4, "to": 3, "label": "Rua Arlindo Cisneiros", "peso": 115.0}, {"from": 44, "to": 54, "label": "Rua Boquira", "peso": 115.52}, {"from": 26, "to": 91, "label": "Rua Barao De Mamore", "peso": 116.77}, {"from": 75, "to": 84, "label": "Rua Capitao Sampaio Xavier", "peso": 117.37}, {"from": 2, "to": 3, "label": "Rua Corrego Jose Grande", "peso": 120.48}, {"from": 16, "to": 63, "label": "Rua Teolandia", "peso": 121.67}, {"from": 57, "to": 92, "label": "Rua Joao Da Mata", "peso": 123.82}, {"from": 36, "to": 41, "label": "Rua Conselheiro Portela", "peso": 124.63}, {"from": 63, "to": 90, "label": "Rua Bemposta", "peso": 124.87}, {"from": 29, "to": 89, "label": "Rua Escada", "peso": 128.39}, {"from": 36, "to": 87, "label": "Rua Natividade Saldanha", "peso": 128.73}, {"from": 52, "to": 85, "label": "Rua Iraguacu", "peso": 131.23}, {"from": 41, "to": 51, "label": "Rua Antonio Celso Uchoa Cavalcanti", "peso": 132.18}, {"from": 16, "to": 17, "label": "Avenida Presidente Cafe Filho", "peso": 133.4}, {"from": 2, "to": 90, "label": "Rua Aratuba", "peso": 135.17}, {"from": 9, "to": 85, "label": "Rua Capy", "peso": 135.95}, {"from": 10, "to": 55, "label": "Avenida Hildebrando De Vasconcelos", "peso": 142.86}, {"from": 2, "to": 17, "label": "Rua Uriel De Holanda", "peso": 143.9}, {"from": 12, "to": 81, "label": "Rua Bispo Cardoso Ayres", "peso": 144.74}, {"from": 35, "to": 55, "label": "Rua Izaltino Lobo", "peso": 144.74}, {"from": 93, "to": 40, "label": "Rua Contendas", "peso": 145.65}, {"from": 37, "to": 88, "label": "Rua Dr Miguel Vieira Ferreira", "peso": 148.89}, {"from": 17, "to": 55, "label": "Rua Izaltino Lobo", "peso": 154.96}, {"from": 41, "to": 75, "label": "Rua Teles Junior", "peso": 159.83}, {"from": 6, "to": 60, "label": "Rua Mandacaru", "peso": 160.86}, {"from": 33, "to": 47, "label": "Avenida Beira Rio", "peso": 161.09}, {"from": 33, "to": 57, "label": "Avenida Beira Rio", "peso": 161.09}, {"from": 23, "to": 65, "label": "Rua Da Harmonia", "peso": 168.23}, {"from": 8, "to": 13, "label": "Rua Professor Manuel Torres", "peso": 168.69}, {"from": 1, "to": 14, "label": "Rua Professor Celestin Malzac", "peso": 171.82}, {"from": 57, "to": 86, "label": "Avenida Beira Rio", "peso": 177.05}, {"from": 7, "to": 9, "label": "Rua Armando Sales De Oliveira", "peso": 177.53}, {"from": 74, "to": 80, "label": "Ponte Maur\u00edcio de Nassau", "peso": 180.0}, {"from": 11, "to": 69, "label": "Rua Delegado Tercio Soares De Aquino", "peso": 182.89}, {"from": 22, "to": 61, "label": "Rua Joaquim Teixeira", "peso": 188.34}, {"from": 11, "to": 48, "label": "Rua Capitao Vicente Da Mota", "peso": 193.4}, {"from": 22, "to": 23, "label": "Rua Joao Barbalho", "peso": 194.98}, {"from": 74, "to": 82, "label": "Ponte 12 de Setembro", "peso": 195.0}, {"from": 65, "to": 84, "label": "Rua Albino Meira", "peso": 196.16}, {"from": 20, "to": 68, "label": "Rua Jornalista Paulo Matos", "peso": 196.42}, {"from": 43, "to": 70, "label": "Rua Costa Pinto", "peso": 196.92}, {"from": 5, "to": 56, "label": "Rua Aroeira", "peso": 202.19}, {"from": 39, "to": 52, "label": "Rua Alfredo Vieira De Melo", "peso": 205.71}, {"from": 8, "to": 58, "label": "Rua Jacob", "peso": 206.67}, {"from": 14, "to": 62, "label": "Rua Itapolis", "peso": 206.94}, {"from": 62, "to": 76, "label": "Rua Itaquari", "peso": 210.23}, {"from": 0, "to": 41, "label": "Rua Teles Junior", "peso": 212.27}, {"from": 12, "to": 33, "label": "Rua Paissandu", "peso": 212.41}, {"from": 12, "to": 27, "label": "Rua Jornalista Edmundo Bittencourt", "peso": 213.19}, {"from": 32, "to": 56, "label": "Rua Trajano De Morais", "peso": 214.3}, {"from": 51, "to": 84, "label": "Rua Simao Mendes", "peso": 221.7}, {"from": 29, "to": 85, "label": "Rua Tutoia", "peso": 222.82}, {"from": 22, "to": 84, "label": "Rua Desembargador Gois Cavalcante", "peso": 224.14}, {"from": 8, "to": 21, "label": "Rua Petronila Botelho", "peso": 229.73}, {"from": 0, "to": 36, "label": "Rua Samuel Campelo", "peso": 231.42}, {"from": 36, "to": 75, "label": "Rua Teles Junior", "peso": 232.62}, {"from": 18, "to": 82, "label": "Rua Bom Sucesso", "peso": 235.15}, {"from": 7, "to": 39, "label": "Rua Dr Adelino Filho", "peso": 242.09}, {"from": 41, "to": 84, "label": "Rua Capitao Sampaio Xavier", "peso": 244.62}, {"from": 72, "to": 60, "label": "Estrada do Encanamento", "peso": 245.0}, {"from": 46, "to": 64, "label": "Rua Dr Joao Asfora", "peso": 246.51}, {"from": 14, "to": 73, "label": "Rua Professor Mario Ramos", "peso": 248.83}, {"from": 19, "to": 20, "label": "Rua Nadia", "peso": 254.48}, {"from": 0, "to": 38, "label": "Avenida Conselheiro Rosa E Silva", "peso": 263.32}, {"from": 36, "to": 70, "label": "Rua Costa Pinto", "peso": 265.9}, {"from": 13, "to": 58, "label": "Rua Jacob", "peso": 266.48}, {"from": 1, "to": 59, "label": "Rua Vereador Francisco De Paula Santana", "peso": 268.13}, {"from": 59, "to": 76, "label": "Rua Tanguara", "peso": 270.67}, {"from": 93, "to": 20, "label": "Rua Coronel Urbano Ribeiro De Sena", "peso": 272.88}, {"from": 10, "to": 71, "label": "Rua Dona Virtuosa De Lucena", "peso": 276.19}, {"from": 86, "to": 92, "label": "Rua Souza Bandeira", "peso": 277.3}, {"from": 61, "to": 90, "label": "Rua Corrego Do Ouro", "peso": 279.5}, {"from": 22, "to": 65, "label": "Rua Da Estrela", "peso": 280.12}, {"from": 40, "to": 71, "label": "Avenida Anibal Benevolo", "peso": 287.89}, {"from": 36, "to": 43, "label": "Rua Costa Pinto", "peso": 293.18}, {"from": 8, "to": 70, "label": "Rua Petronila Botelho", "peso": 294.86}, {"from": 17, "to": 90, "label": "Rua Grijalva Costa", "peso": 298.99}, {"from": 27, "to": 80, "label": "Rua Doutor Jose Mariano", "peso": 299.14}, {"from": 74, "to": 79, "label": "Ponte do Limoeiro", "peso": 300.0}, {"from": 21, "to": 87, "label": "Rua Da Fronteira", "peso": 309.43}, {"from": 51, "to": 65, "label": "Rua Muniz Tavares", "peso": 311.31}, {"from": 19, "to": 71, "label": "Rua Para", "peso": 315.29}, {"from": 47, "to": 57, "label": "Rua Joao Ivo Da Silva", "peso": 321.53}, {"from": 6, "to": 34, "label": "Entrada Br 101-Avenida Norte", "peso": 325.98}, {"from": 30, "to": 92, "label": "Rua Padre Leonardo Greco", "peso": 330.27}, {"from": 12, "to": 80, "label": "Rua Princesa Isabel", "peso": 334.97}, {"from": 48, "to": 49, "label": "Rua Jose Fernandes Portugal", "peso": 338.65}, {"from": 33, "to": 64, "label": "Rua Viscondessa Do Livramento", "peso": 340.09}, {"from": 29, "to": 77, "label": "Rua Paulino De Farias", "peso": 343.94}, {"from": 21, "to": 36, "label": "Rua Cristovao Jaques", "peso": 344.86}, {"from": 5, "to": 6, "label": "Rua Massaranduba", "peso": 348.17}, {"from": 12, "to": 79, "label": "Rua Do Principe", "peso": 355.79}, {"from": 72, "to": 22, "label": "Rua Engenheiro Oscar Ferreira", "peso": 363.0}, {"from": 12, "to": 64, "label": "Rua General Joaquim Inacio", "peso": 363.79}, {"from": 27, "to": 46, "label": "Rua Jose De Alencar", "peso": 367.04}, {"from": 70, "to": 75, "label": "Rua Almirante Noronha De Carvalho", "peso": 372.98}, {"from": 53, "to": 76, "label": "Rua Cordelia Gois Silva", "peso": 373.33}, {"from": 79, "to": 81, "label": "Rua Bispo Cardoso Ayres", "peso": 377.79}, {"from": 30, "to": 37, "label": "Rua Bom Pastor", "peso": 378.02}, {"from": 93, "to": 8, "label": "Rua Sao Bento", "peso": 379.35}, {"from": 78, "to": 86, "label": "Avenida Beira Rio", "peso": 384.28}, {"from": 2, "to": 55, "label": "Rua Gustavo Barrozo", "peso": 385.65}, {"from": 2, "to": 61, "label": "Rua Corrego Do Ouro", "peso": 394.34}, {"from": 77, "to": 85, "label": "Rua Matoso Da Camara", "peso": 399.87}, {"from": 93, "to": 71, "label": "Rua Conselheiro Barros Barreto", "peso": 413.84}, {"from": 77, "to": 89, "label": "Rua Do Nascente", "peso": 420.9}, {"from": 1, "to": 53, "label": "Rua Bom Jardim", "peso": 424.78}, {"from": 30, "to": 50, "label": "Avenida Camarao", "peso": 428.68}, {"from": 33, "to": 41, "label": "Rua Guilherme Pinto", "peso": 437.43}, {"from": 72, "to": 23, "label": "Estrada do Encanamento", "peso": 444.0}, {"from": 32, "to": 63, "label": "Rua Alto Santa Luzia", "peso": 448.61}, {"from": 12, "to": 46, "label": "Rua Visconde De Goiana", "peso": 450.56}, {"from": 73, "to": 92, "label": "Rua Caratinga", "peso": 457.11}, {"from": 31, "to": 76, "label": "Rua Dr Flavio Ferreira Da Silva Marojo", "peso": 475.99}, {"from": 26, "to": 50, "label": "Rua Mauriceia", "peso": 484.48}, {"from": 14, "to": 76, "label": "Rua Acajutiba", "peso": 488.14}, {"from": 48, "to": 69, "label": "Rua Sao Jose", "peso": 504.4}, {"from": 1, "to": 73, "label": "Rua Santa Edwirges", "peso": 534.89}, {"from": 19, "to": 40, "label": "Avenida Nova Do Fundao", "peso": 550.74}, {"from": 76, "to": 88, "label": "Avenida Recife", "peso": 559.87}, {"from": 83, "to": 34, "label": "Rua Dois Irm\u00e3os", "peso": 602.0}, {"from": 16, "to": 42, "label": "Avenida Embaixador Assis Chateaubriand", "peso": 603.06}, {"from": 26, "to": 37, "label": "Rua General Vargas", "peso": 609.94}, {"from": 31, "to": 88, "label": "Rua Vinte E Um De Abril", "peso": 620.72}, {"from": 5, "to": 22, "label": "Avenida Doutor Eurico Chaves", "peso": 632.25}, {"from": 53, "to": 59, "label": "Rua Bom Jardim", "peso": 645.29}, {"from": 5, "to": 63, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 655.79}, {"from": 51, "to": 78, "label": "Rua Leonardo Bezerra Cavalcanti", "peso": 666.14}, {"from": 69, "to": 82, "label": "Avenida Ant\u00f4nio de Goes", "peso": 700.0}, {"from": 31, "to": 37, "label": "Avenida Visconde De Sao Leopoldo", "peso": 708.99}, {"from": 65, "to": 78, "label": "Rua Leonardo Bezerra Cavalcanti", "peso": 709.22}, {"from": 4, "to": 93, "label": "Rua Tamboara", "peso": 718.0}, {"from": 44, "to": 48, "label": "Rua Goncalves De Magalhaes", "peso": 734.33}, {"from": 23, "to": 78, "label": "Avenida Dezessete De Agosto", "peso": 739.83}, {"from": 7, "to": 25, "label": "Rua Aurora Cacote", "peso": 752.91}, {"from": 8, "to": 20, "label": "Rua Expedicionario Jamil Dagli", "peso": 759.53}, {"from": 8, "to": 68, "label": "Rua Expedicionario Jamil Dagli", "peso": 771.42}, {"from": 59, "to": 62, "label": "Rua Vinte E Um De Abril", "peso": 783.53}, {"from": 21, "to": 79, "label": "Rua Projetada", "peso": 849.75}, {"from": 18, "to": 69, "label": "Ponte Governador Paulo Guerra", "peso": 850.0}, {"from": 20, "to": 40, "label": "Rua Coronel Urbano Ribeiro De Sena", "peso": 856.13}, {"from": 7, "to": 53, "label": "Avenida Central", "peso": 862.25}, {"from": 10, "to": 35, "label": "Avenida Rio Morno", "peso": 886.9}, {"from": 37, "to": 50, "label": "Rua General Vargas", "peso": 894.11}, {"from": 6, "to": 32, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 905.91}, {"from": 24, "to": 50, "label": "Rua Ministro Joao Alberto", "peso": 946.87}, {"from": 30, "to": 86, "label": "Rua Souza Bandeira", "peso": 965.6}, {"from": 3, "to": 61, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 966.85}, {"from": 45, "to": 82, "label": "Rua Cabo Eutropio", "peso": 987.16}, {"from": 50, "to": 91, "label": "Rua Emiliano Braga", "peso": 1015.78}, {"from": 52, "to": 76, "label": "Avenida Recife", "peso": 1069.97}, {"from": 8, "to": 84, "label": "Estrada Velha De Agua Fria", "peso": 1070.64}, {"from": 41, "to": 57, "label": "Avenida Beira Rio", "peso": 1079.0}, {"from": 1, "to": 47, "label": "Rua Padre Teofilo Tworz", "peso": 1094.38}, {"from": 47, "to": 73, "label": "Rua Padre Teofilo Tworz", "peso": 1118.1}, {"from": 38, "to": 87, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 1135.74}, {"from": 31, "to": 91, "label": "Rua Historiador Luiz Do Nascimento", "peso": 1139.6}, {"from": 12, "to": 38, "label": "Avenida Joao De Barros", "peso": 1172.63}, {"from": 26, "to": 31, "label": "Avenida Professor Luiz Freire", "peso": 1205.38}, {"from": 30, "to": 73, "label": "Avenida General San Martin", "peso": 1224.98}, {"from": 41, "to": 86, "label": "Avenida Beira Rio", "peso": 1240.84}, {"from": 31, "to": 77, "label": "Avenida Liberdade", "peso": 1260.98}, {"from": 22, "to": 58, "label": "Avenida Professor Jose Dos Anjos", "peso": 1291.58}, {"from": 11, "to": 54, "label": "Rua Canal Do Jordao", "peso": 1305.13}, {"from": 93, "to": 10, "label": "Avenida Anibal Benevolo", "peso": 1337.76}, {"from": 72, "to": 78, "label": "Avenida Dezessete de Agosto", "peso": 1360.0}, {"from": 34, "to": 42, "label": "Rua Limite De Municipio", "peso": 1360.47}, {"from": 25, "to": 49, "label": "Avenida Recife", "peso": 1452.3}, {"from": 93, "to": 55, "label": "Avenida Anibal Benevolo", "peso": 1475.7}, {"from": 21, "to": 68, "label": "Avenida Correia De Brito", "peso": 1553.3}, {"from": 38, "to": 79, "label": "Avenida Joao De Barros", "peso": 1596.38}, {"from": 31, "to": 85, "label": "Avenida Liberdade", "peso": 1619.99}, {"from": 1, "to": 18, "label": "Avenida Sul Gov. Cid Sampaio", "peso": 450.0}, {"from": 73, "to": 76, "label": "Avenida General San Martin", "peso": 1899.57}, {"from": 58, "to": 84, "label": "Avenida Professor Jose Dos Anjos", "peso": 1908.33}, {"from": 42, "to": 66, "label": "Rua Limite De Municipio", "peso": 1917.32}, {"from": 6, "to": 24, "label": "Avenida Da Recuperacao", "peso": 2015.43}, {"from": 7, "to": 52, "label": "Avenida Central", "peso": 2039.99}, {"from": 39, "to": 76, "label": "Avenida Recife", "peso": 2102.86}, {"from": 30, "to": 76, "label": "Avenida Engenheiro Abdias De Carvalho", "peso": 2139.0}, {"from": 52, "to": 53, "label": "Avenida Central", "peso": 2317.7}, {"from": 8, "to": 75, "label": "Avenida Professor Jose Dos Anjos", "peso": 2534.02}, {"from": 22, "to": 63, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 2916.34}, {"from": 9, "to": 52, "label": "Avenida Central", "peso": 3320.07}, {"from": 7, "to": 49, "label": "Avenida Recife", "peso": 3352.46}, {"from": 79, "to": 87, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 3421.94}, {"from": 3, "to": 22, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 3445.6}, {"from": 24, "to": 91, "label": "Avenida Caxanga", "peso": 3470.48}, {"from": 22, "to": 90, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 3686.43}, {"from": 12, "to": 41, "label": "Avenida Governador Agamenon Magalhaes", "peso": 3893.66}, {"from": 24, "to": 34, "label": "Avenida Da Recuperacao", "peso": 4094.03}, {"from": 44, "to": 49, "label": "Avenida Recife", "peso": 4394.66}, {"from": 25, "to": 44, "label": "Avenida Recife", "peso": 4514.06}, {"from": 1, "to": 82, "label": "Avenida Sul Gov. Cid Sampaio", "peso": 4529.21}, {"from": 67, "to": 42, "label": "Estrada do Orfanato", "peso": 4710.0}, {"from": 1, "to": 45, "label": "Avenida Central", "peso": 4928.92}, {"from": 32, "to": 34, "label": "Avenida Da Recuperacao", "peso": 5093.86}, {"from": 11, "to": 44, "label": "Avenida Marechal Mascarenhas De Moraes", "peso": 5557.85}, {"from": 7, "to": 44, "label": "Avenida Recife", "peso": 6414.22}, {"from": 1, "to": 48, "label": "Avenida Sul Gov. Cid Sampaio", "peso": 7645.21}, {"from": 32, "to": 42, "label": "Avenida Da Recuperacao", "peso": 8377.9}];

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const tooltip = document.getElementById('tooltip');
        const selectMicro = document.getElementById('selectMicro');
        const btnResetFiltro = document.getElementById('btnResetFiltro');
        const inputBusca = document.getElementById('inputBusca');

        let offsetX = 0;
        let offsetY = 0;
        let scale = 1.0;
        let isDragging = false;
        let startX, startY;
        let bairroSelecionado = null;
        let microSelecionada = 'todas';
        let bairroBuscado = null;

        // Popular dropdown de microrregi√µes
        const microregioesUnicas = [...new Set(nodes.map(n => n.microrregiao))].sort();
        microregioesUnicas.forEach(micro => {
            const option = document.createElement('option');
            option.value = micro;
            const microNodes = nodes.filter(n => n.microrregiao === micro);
            const totalAcidentes = microNodes.reduce((sum, n) => sum + n.total_acidentes, 0);
            option.textContent = `${micro} (${totalAcidentes} acidentes)`;
            selectMicro.appendChild(option);
        });

        selectMicro.addEventListener('change', (e) => {
            microSelecionada = e.target.value;
            bairroSelecionado = null;
            draw();
        });

        // Busca de bairro
        inputBusca.addEventListener('input', (e) => {
            const busca = e.target.value.trim().toLowerCase();
            if (busca.length === 0) {
                bairroBuscado = null;
                draw();
                return;
            }

            const bairroEncontrado = nodes.find(n =>
                n.label.toLowerCase().includes(busca)
            );

            if (bairroEncontrado) {
                bairroBuscado = bairroEncontrado.label;
                bairroSelecionado = bairroEncontrado.label;

                offsetX = canvas.width / 2 - bairroEncontrado.x * scale;
                offsetY = canvas.height / 2 - bairroEncontrado.y * scale;

                draw();
            } else {
                bairroBuscado = null;
                draw();
            }
        });

        btnResetFiltro.addEventListener('click', () => {
            microSelecionada = 'todas';
            selectMicro.value = 'todas';
            bairroSelecionado = null;
            bairroBuscado = null;
            inputBusca.value = '';
            scale = 1.0;
            offsetX = canvas.width / 2 - 3000;
            offsetY = canvas.height / 2 - 4000;
            draw();
        });

        function resizeCanvas() {
            const container = document.getElementById('canvasContainer');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            offsetX = canvas.width / 2 - 3000;
            offsetY = canvas.height / 2 - 4000;
            draw();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        let mouseDownX = 0;
        let mouseDownY = 0;
        let hasMoved = false;

        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseDownX = e.clientX - rect.left;
            mouseDownY = e.clientY - rect.top;
            hasMoved = false;
            isDragging = true;
            startX = e.clientX - offsetX;
            startY = e.clientY - offsetY;
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const rect = canvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;
                const distMoved = Math.sqrt(Math.pow(currentX - mouseDownX, 2) + Math.pow(currentY - mouseDownY, 2));

                if (distMoved > 5) {
                    hasMoved = true;
                    canvas.classList.add('dragging');
                    offsetX = e.clientX - startX;
                    offsetY = e.clientY - startY;
                    draw();
                }
            } else {
                handleMouseMove(e);
            }
        });

        canvas.addEventListener('mouseup', (e) => {
            if (!hasMoved) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = (e.clientX - rect.left - offsetX) / scale;
                const mouseY = (e.clientY - rect.top - offsetY) / scale;

                let clicouEmBairro = false;
                for (const node of nodes) {
                    const raio = 18;
                    const dx = mouseX - node.x;
                    const dy = mouseY - node.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < raio) {
                        if (bairroSelecionado === node.label) {
                            bairroSelecionado = null;
                        } else {
                            bairroSelecionado = node.label;
                        }
                        clicouEmBairro = true;
                        draw();
                        break;
                    }
                }

                if (!clicouEmBairro && bairroSelecionado) {
                    bairroSelecionado = null;
                    draw();
                }
            }

            isDragging = false;
            hasMoved = false;
            canvas.classList.remove('dragging');
        });

        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
            canvas.classList.remove('dragging');
            tooltip.style.display = 'none';
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            const worldX = (mouseX - offsetX) / scale;
            const worldY = (mouseY - offsetY) / scale;
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            const newScale = Math.max(0.1, Math.min(5, scale * delta));
            scale = newScale;
            offsetX = mouseX - worldX * scale;
            offsetY = mouseY - worldY * scale;
            draw();
        });

        function getCorIntensidade(totalAcidentes) {
            // Escala por faixas absolutas de acidentes
            if (totalAcidentes === 0) {
                return 'rgba(220, 220, 220, 0.1)'; // Cinza bem claro
            } else if (totalAcidentes <= 9) {
                // 1-9 acidentes: azul bem claro
                const p = totalAcidentes / 9;
                return `rgba(${200}, ${220}, ${255}, ${0.3 + p * 0.1})`;
            } else if (totalAcidentes <= 20) {
                // 10-20 acidentes: azul m√©dio
                const p = (totalAcidentes - 10) / 10;
                return `rgba(${100 + p * 100}, ${150 + p * 70}, ${255}, ${0.4 + p * 0.1})`;
            } else if (totalAcidentes <= 40) {
                // 21-40 acidentes: verde
                const p = (totalAcidentes - 21) / 19;
                return `rgba(${50 + p * 150}, ${200 + p * 55}, ${100 - p * 100}, ${0.5 + p * 0.1})`;
            } else if (totalAcidentes <= 90) {
                // 41-90 acidentes: amarelo
                const p = (totalAcidentes - 41) / 49;
                return `rgba(${200 + p * 55}, ${255}, ${0}, ${0.6 + p * 0.1})`;
            } else if (totalAcidentes <= 190) {
                // 91-190 acidentes: laranja
                const p = (totalAcidentes - 91) / 99;
                return `rgba(${255}, ${200 - p * 50}, ${0}, ${0.7 + p * 0.1})`;
            } else {
                // 191-549 acidentes: vermelho intenso
                const p = Math.min((totalAcidentes - 191) / 358, 1.0);
                return `rgba(${255 - p * 55}, ${Math.floor(150 - p * 150)}, ${0}, ${0.8 + p * 0.1})`;
            }
        }

        function handleMouseMove(e) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = (e.clientX - rect.left - offsetX) / scale;
            const mouseY = (e.clientY - rect.top - offsetY) / scale;

            let found = false;
            for (const node of nodes) {
                const raio = 18;
                const dx = mouseX - node.x;
                const dy = mouseY - node.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < raio) {
                    tooltip.innerHTML = `
                        <div class="tooltip-title">${node.label}</div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Total de Acidentes:</span>
                            <strong>${node.total_acidentes}</strong>
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Com V√≠tima:</span>
                            <strong>${node.com_vitima}</strong> (${node.perc_com_vitima.toFixed(1)}%)
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Sem V√≠tima:</span>
                            <strong>${node.sem_vitima}</strong>
                        </div>
                        <div class="tooltip-row" style="margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.2);">
                            <span class="tooltip-label">Microrregi√£o:</span> ${node.microrregiao}
                        </div>
                    `;
                    tooltip.style.left = (e.clientX + 15) + 'px';
                    tooltip.style.top = (e.clientY + 15) + 'px';
                    tooltip.style.display = 'block';
                    found = true;
                    break;
                }
            }

            if (!found) {
                tooltip.style.display = 'none';
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(offsetX, offsetY);
            ctx.scale(scale, scale);

            let vizinhosSet = null;
            let arestasVizinhos = new Set();

            if (bairroSelecionado) {
                vizinhosSet = new Set();
                vizinhosSet.add(bairroSelecionado);

                edges.forEach(edge => {
                    const fromNode = nodes[edge.from];
                    const toNode = nodes[edge.to];

                    if (fromNode.label === bairroSelecionado) {
                        vizinhosSet.add(toNode.label);
                        arestasVizinhos.add(`${edge.from}-${edge.to}`);
                    } else if (toNode.label === bairroSelecionado) {
                        vizinhosSet.add(fromNode.label);
                        arestasVizinhos.add(`${edge.from}-${edge.to}`);
                    }
                });
            }

            // Determinar quais n√≥s devem ser exibidos baseado no filtro
            const nodesFiltrados = microSelecionada === 'todas'
                ? nodes
                : nodes.filter(n => {
                    const microPrincipal = n.microrregiao.split(' / ')[0].trim();
                    return microPrincipal === microSelecionada || n.microrregiao === microSelecionada;
                });

            const labelsFiltrados = new Set(nodesFiltrados.map(n => n.label));

            // 1. DESENHAR MAPA DE CALOR (atr√°s de tudo)
            nodesFiltrados.forEach(node => {
                if (node.total_acidentes === 0) return;

                const corCalor = getCorIntensidade(node.total_acidentes);

                // Raio bem maior para criar mapa de calor cont√≠nuo com sobreposi√ß√£o
                const raioCalor = 500 + (node.total_acidentes / 549) * 300;

                const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, raioCalor);
                gradient.addColorStop(0, corCalor);
                gradient.addColorStop(0.5, corCalor.replace(/[\d.]+\)$/, '0.3)'));
                gradient.addColorStop(0.85, corCalor.replace(/[\d.]+\)$/, '0.05)'));
                gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(node.x, node.y, raioCalor, 0, Math.PI * 2);
                ctx.fill();
            });

            // 2. Desenhar arestas
            edges.forEach(edge => {
                const fromNode = nodes[edge.from];
                const toNode = nodes[edge.to];

                if (!labelsFiltrados.has(fromNode.label) || !labelsFiltrados.has(toNode.label)) return;

                const chave = `${edge.from}-${edge.to}`;

                if (vizinhosSet && arestasVizinhos.has(chave)) {
                    ctx.strokeStyle = '#e74c3c';
                    ctx.lineWidth = 3;
                } else if (vizinhosSet) {
                    ctx.strokeStyle = '#ddd';
                    ctx.lineWidth = 0.5;
                } else {
                    ctx.strokeStyle = '#999';
                    ctx.lineWidth = 1;
                }

                ctx.beginPath();
                ctx.moveTo(fromNode.x, fromNode.y);
                ctx.lineTo(toNode.x, toNode.y);
                ctx.stroke();
            });

            // 3. Desenhar n√≥s
            nodes.forEach(node => {
                if (!labelsFiltrados.has(node.label)) return;

                const raioNo = 18;
                let shouldDim = false;

                if (vizinhosSet && !vizinhosSet.has(node.label)) {
                    shouldDim = true;
                }

                // Desenhar n√≥ principal
                ctx.fillStyle = shouldDim ? '#d0d0d0' : '#333';
                ctx.beginPath();
                ctx.arc(node.x, node.y, raioNo, 0, Math.PI * 2);
                ctx.fill();

                // Borda do n√≥
                ctx.strokeStyle = (vizinhosSet && node.label === bairroSelecionado) ? '#e74c3c' : '#fff';
                ctx.lineWidth = (vizinhosSet && node.label === bairroSelecionado) ? 4 : 2;
                ctx.beginPath();
                ctx.arc(node.x, node.y, raioNo, 0, Math.PI * 2);
                ctx.stroke();

                // Label do bairro
                if (scale > 0.4) {
                    ctx.fillStyle = '#333';
                    ctx.font = 'bold 14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(node.label, node.x, node.y + raioNo + 18);
                }
            });

            ctx.restore();
        }

        draw();
    </script>
</body>
</html>