<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Grafo de Sa√∫de - √çndice OCDE por Bairro</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            overflow: hidden;
        }
        #container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        #header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
        }
        h1 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 24px;
        }
        #filtroMicro {
            margin: 10px 0;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        select, input[type="text"] {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }
        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: #4ecdc4;
        }
        input[type="text"] {
            min-width: 250px;
        }
        button {
            padding: 8px 16px;
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover {
            background: #3db5ac;
        }
        #legenda {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            font-size: 13px;
        }
        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legenda-cor {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #333;
        }
        #canvasContainer {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: white;
        }
        #painelRelatorio {
            position: absolute;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            transition: right 0.3s ease;
            overflow-y: auto;
            z-index: 50;
            padding: 20px;
        }
        #painelRelatorio.aberto {
            right: 0;
        }
        .fechar-painel {
            position: sticky;
            top: 0;
            background: white;
            padding: 10px 0;
            border-bottom: 2px solid #eee;
            margin-bottom: 15px;
        }
        .relatorio-item {
            margin: 15px 0;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 6px;
            border-left: 4px solid #e74c3c;
        }
        .relatorio-item.positiva {
            border-left-color: #27ae60;
        }
        .relatorio-titulo {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .relatorio-descricao {
            font-size: 13px;
            color: #555;
            line-height: 1.4;
        }
        .legenda-arestas {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            font-size: 12px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }
        .legenda-aresta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .legenda-aresta-linha {
            width: 30px;
            height: 3px;
        }
        #canvas {
            display: block;
            cursor: grab;
        }
        #canvas.dragging {
            cursor: grabbing;
        }
        #tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 13px;
            pointer-events: none;
            display: none;
            z-index: 100;
            max-width: 280px;
            line-height: 1.5;
        }
        .tooltip-title {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            padding-bottom: 5px;
        }
        .tooltip-row {
            margin: 3px 0;
        }
        .tooltip-label {
            color: #aaa;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="header">
            <h1>√çndice OCDE de Sa√∫de por Bairro - Recife</h1>
            <div id="filtroMicro">
                <label for="selectMicro"><strong>Filtrar por Microrregi√£o:</strong></label>
                <select id="selectMicro">
                    <option value="todas">Todas as Microrregi√µes</option>
                </select>
                <label for="inputBusca"><strong>Buscar Bairro:</strong></label>
                <input type="text" id="inputBusca" placeholder="Digite o nome do bairro...">
                <button id="btnResetFiltro">Resetar Visualiza√ß√£o</button>
                <button id="btnRelatorio">üìä Ver Relat√≥rio de Conex√µes</button>
            </div>
            <div id="legenda">
                <div class="legenda-item">
                    <div class="legenda-cor" style="background: #27ae60;"></div>
                    <span><strong>Excelente</strong> (‚â• 2.0 √ó OCDE)</span>
                </div>
                <div class="legenda-item">
                    <div class="legenda-cor" style="background: #3498db;"></div>
                    <span><strong>Bom</strong> (1.0-2.0 √ó OCDE)</span>
                </div>
                <div class="legenda-item">
                    <div class="legenda-cor" style="background: #f39c12;"></div>
                    <span><strong>Regular</strong> (0.5-1.0 √ó OCDE)</span>
                </div>
                <div class="legenda-item">
                    <div class="legenda-cor" style="background: #e74c3c;"></div>
                    <span><strong>Cr√≠tico</strong> (&lt; 0.5 √ó OCDE)</span>
                </div>
            </div>
            <div class="legenda-arestas">
                <strong>Conex√µes:</strong>
                <div class="legenda-aresta-item">
                    <div class="legenda-aresta-linha" style="background: #27ae60;"></div>
                    <span>Bom‚ÜîBom</span>
                </div>
                <div class="legenda-aresta-item">
                    <div class="legenda-aresta-linha" style="background: #3498db;"></div>
                    <span>Bom‚ÜîCr√≠tico</span>
                </div>
                <div class="legenda-aresta-item">
                    <div class="legenda-aresta-linha" style="background: #f39c12;"></div>
                    <span>Regular‚ÜîRegular</span>
                </div>
                <div class="legenda-aresta-item">
                    <div class="legenda-aresta-linha" style="background: #e74c3c;"></div>
                    <span>Cr√≠tico‚ÜîCr√≠tico</span>
                </div>
            </div>
        </div>
        <div id="canvasContainer">
            <canvas id="canvas"></canvas>
            <div id="tooltip"></div>
            <div id="painelRelatorio">
                <div class="fechar-painel">
                    <h2 style="margin: 0 0 10px 0;">Relat√≥rio de Conex√µes</h2>
                    <button onclick="fecharPainel()">‚úï Fechar</button>
                </div>
                <div id="conteudoRelatorio"></div>
            </div>
        </div>
    </div>
    <script>
        const nodes = [{"id": 0, "label": "Aflitos", "x": 4723.800317643538, "y": 1837.3098678735032, "microrregiao": "3.1", "indice_ocde": 0.4008, "indice_micro": 0.4937, "medicos_por_unidade": 3.5, "proporcao_medico_pop": 0.001403, "medicos_totais": 7, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 1, "label": "Afogados", "x": 2157.670883697321, "y": 5847.857586467249, "microrregiao": "5.1", "indice_ocde": 0.4723, "indice_micro": 0.7081, "medicos_por_unidade": 4.73, "proporcao_medico_pop": 0.001653, "medicos_totais": 52, "unidades": 11, "categoria": "critico", "categoria_micro": "regular"}, {"id": 2, "label": "Alto Jos\u00e9 Bonif\u00e1cio", "x": 1157.7680860552412, "y": 3670.04165380661, "microrregiao": "3.2", "indice_ocde": 0.6891, "indice_micro": 0.5313, "medicos_por_unidade": 8.33, "proporcao_medico_pop": 0.002412, "medicos_totais": 25, "unidades": 3, "categoria": "regular", "categoria_micro": "regular"}, {"id": 3, "label": "Alto Jos\u00e9 do Pinho", "x": 1069.1208610662975, "y": 4345.614384873613, "microrregiao": "3.2", "indice_ocde": 0.6314, "indice_micro": 0.5313, "medicos_por_unidade": 12.5, "proporcao_medico_pop": 0.00221, "medicos_totais": 25, "unidades": 2, "categoria": "regular", "categoria_micro": "regular"}, {"id": 4, "label": "Alto Santa Teresinha", "x": 1558.403079535653, "y": 2307.115720689949, "microrregiao": "2.2", "indice_ocde": 0.6474, "indice_micro": 0.3394, "medicos_por_unidade": 7.5, "proporcao_medico_pop": 0.002266, "medicos_totais": 15, "unidades": 2, "categoria": "regular", "categoria_micro": "critico"}, {"id": 5, "label": "Alto do Mandu", "x": 5504.479732623254, "y": 2998.5025599491432, "microrregiao": "3.1", "indice_ocde": 2.0984, "indice_micro": 0.4937, "medicos_por_unidade": 5.17, "proporcao_medico_pop": 0.007344, "medicos_totais": 31, "unidades": 6, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 6, "label": "Apipucos", "x": 5045.721307220678, "y": 1803.6594545112628, "microrregiao": "3.1", "indice_ocde": 1.3589, "indice_micro": 0.4937, "medicos_por_unidade": 6.0, "proporcao_medico_pop": 0.004756, "medicos_totais": 12, "unidades": 2, "categoria": "bom", "categoria_micro": "critico"}, {"id": 7, "label": "Areias", "x": 3817.528237809873, "y": 5504.980359349494, "microrregiao": "5.2", "indice_ocde": 0.5556, "indice_micro": 0.5877, "medicos_por_unidade": 7.43, "proporcao_medico_pop": 0.001945, "medicos_totais": 52, "unidades": 7, "categoria": "regular", "categoria_micro": "regular"}, {"id": 8, "label": "Arruda", "x": 930.1001429409729, "y": 2477.797360311009, "microrregiao": "2.1", "indice_ocde": 0.4019, "indice_micro": 0.4144, "medicos_por_unidade": 6.0, "proporcao_medico_pop": 0.001407, "medicos_totais": 18, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 9, "label": "Barro", "x": 4881.556244643066, "y": 5079.218352365662, "microrregiao": "5.3", "indice_ocde": 0.1309, "indice_micro": 0.4444, "medicos_por_unidade": 4.67, "proporcao_medico_pop": 0.000458, "medicos_totais": 14, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 10, "label": "Beberibe", "x": 3826.167253635279, "y": 2474.8656333920285, "microrregiao": "2.2 / 2.3", "indice_ocde": 1.0076, "indice_micro": 0.3394, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.003527, "medicos_totais": 25, "unidades": 5, "categoria": "bom", "categoria_micro": "critico"}, {"id": 11, "label": "Boa Viagem", "x": 1206.784102482808, "y": 6766.207237613363, "microrregiao": "6.1", "indice_ocde": 0.1408, "indice_micro": 0.201, "medicos_por_unidade": 4.13, "proporcao_medico_pop": 0.000493, "medicos_totais": 62, "unidades": 15, "categoria": "critico", "categoria_micro": "critico"}, {"id": 12, "label": "Boa Vista", "x": 2778.5384037080657, "y": 696.7855469174378, "microrregiao": "1.2", "indice_ocde": 0.4129, "indice_micro": 2.0145, "medicos_por_unidade": 3.8, "proporcao_medico_pop": 0.001445, "medicos_totais": 19, "unidades": 5, "categoria": "critico", "categoria_micro": "excelente"}, {"id": 13, "label": "Bomba do Hemet\u00e9rio", "x": 2370.9379094097367, "y": 2163.1737503022896, "microrregiao": "2.2", "indice_ocde": 0.8134, "indice_micro": 0.3394, "medicos_por_unidade": 7.33, "proporcao_medico_pop": 0.002847, "medicos_totais": 22, "unidades": 3, "categoria": "regular", "categoria_micro": "critico"}, {"id": 14, "label": "Bongi", "x": 2320.11510633897, "y": 5481.171629130089, "microrregiao": "5.1", "indice_ocde": 1.295, "indice_micro": 0.7081, "medicos_por_unidade": 6.4, "proporcao_medico_pop": 0.004533, "medicos_totais": 32, "unidades": 5, "categoria": "bom", "categoria_micro": "regular"}, {"id": 15, "label": "Bras\u00edlia Teimosa", "x": 1225.3026509911224, "y": 7245.507126662613, "microrregiao": "6.1", "indice_ocde": 0.2911, "indice_micro": 0.201, "medicos_por_unidade": 5.67, "proporcao_medico_pop": 0.001019, "medicos_totais": 17, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 16, "label": "Brejo da Guabiraba", "x": 2769.6923289288684, "y": 3687.47206260958, "microrregiao": "3.3", "indice_ocde": 0.4305, "indice_micro": 0.3586, "medicos_por_unidade": 5.33, "proporcao_medico_pop": 0.001507, "medicos_totais": 16, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 17, "label": "Brejo de Beberibe", "x": 2966.251080007515, "y": 4003.9379030119626, "microrregiao": "3.3", "indice_ocde": 1.0339, "indice_micro": 0.3586, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.003619, "medicos_totais": 28, "unidades": 4, "categoria": "bom", "categoria_micro": "critico"}, {"id": 18, "label": "Cabanga", "x": 2799.1822428201476, "y": 1327.6552171444205, "microrregiao": "1.2", "indice_ocde": 3.745, "indice_micro": 2.0145, "medicos_por_unidade": 8.0, "proporcao_medico_pop": 0.013108, "medicos_totais": 24, "unidades": 3, "categoria": "excelente", "categoria_micro": "excelente"}, {"id": 19, "label": "Cajueiro", "x": 2061.4591226483203, "y": 2051.035305570863, "microrregiao": "2.2", "indice_ocde": 1.016, "indice_micro": 0.3394, "medicos_por_unidade": 6.0, "proporcao_medico_pop": 0.003556, "medicos_totais": 18, "unidades": 3, "categoria": "bom", "categoria_micro": "critico"}, {"id": 20, "label": "Campina do Barreto", "x": 241.69778220491145, "y": 2950.6973985499353, "microrregiao": "2.1", "indice_ocde": 0.2936, "indice_micro": 0.4144, "medicos_por_unidade": 4.5, "proporcao_medico_pop": 0.001028, "medicos_totais": 9, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 21, "label": "Campo Grande", "x": 25.45833305043272, "y": 2362.1632124319704, "microrregiao": "2.1", "indice_ocde": 0.1259, "indice_micro": 0.4144, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.00044, "medicos_totais": 14, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 22, "label": "Casa Amarela", "x": 5693.942679845788, "y": 2452.5010755222665, "microrregiao": "3.1", "indice_ocde": 0.2729, "indice_micro": 0.4937, "medicos_por_unidade": 7.75, "proporcao_medico_pop": 0.000955, "medicos_totais": 31, "unidades": 4, "categoria": "critico", "categoria_micro": "critico"}, {"id": 23, "label": "Casa Forte", "x": 4402.704963560108, "y": 2190.4251419595453, "microrregiao": "3.1", "indice_ocde": 0.0906, "indice_micro": 0.4937, "medicos_por_unidade": 2.0, "proporcao_medico_pop": 0.000317, "medicos_totais": 2, "unidades": 1, "categoria": "critico", "categoria_micro": "critico"}, {"id": 24, "label": "Caxang\u00e1", "x": 390.9635400253747, "y": 5708.233102086353, "microrregiao": "4.3", "indice_ocde": 0.5378, "indice_micro": 0.2442, "medicos_por_unidade": 6.5, "proporcao_medico_pop": 0.001882, "medicos_totais": 26, "unidades": 4, "categoria": "regular", "categoria_micro": "critico"}, {"id": 25, "label": "Ca\u00e7ote", "x": 3503.9296088779456, "y": 5202.993106908998, "microrregiao": "5.2", "indice_ocde": 0.4578, "indice_micro": 0.5877, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.001602, "medicos_totais": 14, "unidades": 2, "categoria": "critico", "categoria_micro": "regular"}, {"id": 26, "label": "Cidade Universit\u00e1ria", "x": 328.8004634368994, "y": 5265.750410732141, "microrregiao": "4.3", "indice_ocde": 2.3561, "indice_micro": 0.2442, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.008246, "medicos_totais": 15, "unidades": 3, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 27, "label": "Coelhos", "x": 3691.148102194282, "y": 1022.0721819360194, "microrregiao": "1.3", "indice_ocde": 0.9165, "indice_micro": 0.6129, "medicos_por_unidade": 3.8, "proporcao_medico_pop": 0.003208, "medicos_totais": 19, "unidades": 5, "categoria": "regular", "categoria_micro": "regular"}, {"id": 28, "label": "Cohab", "x": 5000, "y": 7000, "microrregiao": "6.3", "indice_ocde": 0.1688, "indice_micro": 0.1688, "medicos_por_unidade": 4.11, "proporcao_medico_pop": 0.000591, "medicos_totais": 37, "unidades": 9, "categoria": "critico", "categoria_micro": "critico"}, {"id": 29, "label": "Coqueiral", "x": 5243.484256482916, "y": 5825.754970939215, "microrregiao": "5.3", "indice_ocde": 0.788, "indice_micro": 0.4444, "medicos_por_unidade": 8.67, "proporcao_medico_pop": 0.002758, "medicos_totais": 26, "unidades": 3, "categoria": "regular", "categoria_micro": "critico"}, {"id": 30, "label": "Cordeiro", "x": 3668.239526807275, "y": 3803.575455041649, "microrregiao": "4.1", "indice_ocde": 0.4324, "indice_micro": 0.4792, "medicos_por_unidade": 7.12, "proporcao_medico_pop": 0.001514, "medicos_totais": 57, "unidades": 8, "categoria": "critico", "categoria_micro": "critico"}, {"id": 31, "label": "Curado", "x": 5213.610016454443, "y": 5152.7281808242105, "microrregiao": "5.3", "indice_ocde": 0.5004, "indice_micro": 0.4444, "medicos_por_unidade": 5.8, "proporcao_medico_pop": 0.001751, "medicos_totais": 29, "unidades": 5, "categoria": "regular", "categoria_micro": "critico"}, {"id": 32, "label": "C\u00f3rrego do Jenipapo", "x": 2450.0571896127944, "y": 4422.4156057004675, "microrregiao": "3.3", "indice_ocde": 0.7774, "indice_micro": 0.3586, "medicos_por_unidade": 7.33, "proporcao_medico_pop": 0.002721, "medicos_totais": 22, "unidades": 3, "categoria": "regular", "categoria_micro": "critico"}, {"id": 33, "label": "Derby", "x": 4992.192181968527, "y": 3132.979721943807, "microrregiao": "3.1", "indice_ocde": 0.153, "indice_micro": 0.4937, "medicos_por_unidade": 1.0, "proporcao_medico_pop": 0.000536, "medicos_totais": 1, "unidades": 1, "categoria": "critico", "categoria_micro": "critico"}, {"id": 34, "label": "Dois Irm\u00e3os", "x": 5658.950909435113, "y": 2262.7484446611206, "microrregiao": "3.1", "indice_ocde": 2.1717, "indice_micro": 0.4937, "medicos_por_unidade": 7.67, "proporcao_medico_pop": 0.007601, "medicos_totais": 23, "unidades": 3, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 35, "label": "Dois Unidos", "x": 3347.1881639834405, "y": 2226.707147369207, "microrregiao": "2.2 / 2.3", "indice_ocde": 0.1363, "indice_micro": 0.3394, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.000477, "medicos_totais": 15, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 36, "label": "Encruzilhada", "x": 873.6093326923597, "y": 2788.593394449682, "microrregiao": "2.1", "indice_ocde": 0.2623, "indice_micro": 0.4144, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.000918, "medicos_totais": 14, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 37, "label": "Engenho do Meio", "x": 5266.583442930699, "y": 3962.8391464499764, "microrregiao": "4.2", "indice_ocde": 0.7252, "indice_micro": 0.2859, "medicos_por_unidade": 6.25, "proporcao_medico_pop": 0.002538, "medicos_totais": 25, "unidades": 4, "categoria": "regular", "categoria_micro": "critico"}, {"id": 38, "label": "Espinheiro", "x": 4549.749313976428, "y": 2038.9813282919704, "microrregiao": "3.1", "indice_ocde": 0.399, "indice_micro": 0.4937, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.001397, "medicos_totais": 15, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 39, "label": "Est\u00e2ncia", "x": 3476.505662894006, "y": 5857.243304108526, "microrregiao": "5.2", "indice_ocde": 1.0028, "indice_micro": 0.5877, "medicos_por_unidade": 6.5, "proporcao_medico_pop": 0.00351, "medicos_totais": 26, "unidades": 4, "categoria": "bom", "categoria_micro": "regular"}, {"id": 40, "label": "Fund\u00e3o", "x": 2042.769860863045, "y": 2956.3361689826484, "microrregiao": "2.2", "indice_ocde": 0.3666, "indice_micro": 0.3394, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.001283, "medicos_totais": 10, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 41, "label": "Gra\u00e7as", "x": 4471.820985761534, "y": 2950.7163762755176, "microrregiao": "3.1", "indice_ocde": 0.4352, "indice_micro": 0.4937, "medicos_por_unidade": 7.5, "proporcao_medico_pop": 0.001523, "medicos_totais": 30, "unidades": 4, "categoria": "critico", "categoria_micro": "critico"}, {"id": 42, "label": "Guabiraba", "x": 2097.8721877823186, "y": 4033.166552936118, "microrregiao": "3.3", "indice_ocde": 0.4635, "indice_micro": 0.3586, "medicos_por_unidade": 6.0, "proporcao_medico_pop": 0.001622, "medicos_totais": 18, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 43, "label": "Hip\u00f3dromo", "x": 73.14800675528244, "y": 2671.662567929763, "microrregiao": "2.1", "indice_ocde": 3.0061, "indice_micro": 0.4144, "medicos_por_unidade": 7.33, "proporcao_medico_pop": 0.010521, "medicos_totais": 22, "unidades": 3, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 44, "label": "Ibura", "x": 3808.4165211365967, "y": 6959.841787115196, "microrregiao": "6.2", "indice_ocde": 0.2703, "indice_micro": 0.2732, "medicos_por_unidade": 3.58, "proporcao_medico_pop": 0.000946, "medicos_totais": 43, "unidades": 12, "categoria": "critico", "categoria_micro": "critico"}, {"id": 45, "label": "Ilha Joana Bezerra", "x": 4307.107837761362, "y": 1036.0779702234497, "microrregiao": "1.3", "indice_ocde": 0.4662, "indice_micro": 0.6129, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.001632, "medicos_totais": 20, "unidades": 4, "categoria": "critico", "categoria_micro": "regular"}, {"id": 46, "label": "Ilha do Leite", "x": 2161.3524639366724, "y": 1146.9333244743866, "microrregiao": "1.2", "indice_ocde": 0.2886, "indice_micro": 2.0145, "medicos_por_unidade": 1.0, "proporcao_medico_pop": 0.00101, "medicos_totais": 1, "unidades": 1, "categoria": "critico", "categoria_micro": "excelente"}, {"id": 47, "label": "Ilha do Retiro", "x": 3601.7010485186406, "y": 4222.183304471704, "microrregiao": "4.1", "indice_ocde": 1.6653, "indice_micro": 0.4792, "medicos_por_unidade": 7.67, "proporcao_medico_pop": 0.005829, "medicos_totais": 23, "unidades": 3, "categoria": "bom", "categoria_micro": "critico"}, {"id": 48, "label": "Imbiribeira", "x": 1826.4880166498053, "y": 6974.662750769398, "microrregiao": "6.1", "indice_ocde": 0.1862, "indice_micro": 0.201, "medicos_por_unidade": 4.25, "proporcao_medico_pop": 0.000652, "medicos_totais": 34, "unidades": 8, "categoria": "critico", "categoria_micro": "critico"}, {"id": 49, "label": "Ipsep", "x": 1657.9097086807424, "y": 6668.082848664342, "microrregiao": "6.1", "indice_ocde": 0.4713, "indice_micro": 0.201, "medicos_por_unidade": 4.86, "proporcao_medico_pop": 0.00165, "medicos_totais": 34, "unidades": 7, "categoria": "critico", "categoria_micro": "critico"}, {"id": 50, "label": "Iputinga", "x": 4297.085577736135, "y": 3675.334277446848, "microrregiao": "4.1", "indice_ocde": 0.1831, "indice_micro": 0.4792, "medicos_por_unidade": 4.57, "proporcao_medico_pop": 0.000641, "medicos_totais": 32, "unidades": 7, "categoria": "critico", "categoria_micro": "critico"}, {"id": 51, "label": "Jaqueira", "x": 4386.750361670277, "y": 2764.718882068583, "microrregiao": "3.1", "indice_ocde": 2.7677, "indice_micro": 0.4937, "medicos_por_unidade": 4.33, "proporcao_medico_pop": 0.009687, "medicos_totais": 13, "unidades": 3, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 52, "label": "Jardim S\u00e3o Paulo", "x": 4666.773454191086, "y": 5685.627547563875, "microrregiao": "5.3", "indice_ocde": 0.2953, "indice_micro": 0.4444, "medicos_por_unidade": 5.17, "proporcao_medico_pop": 0.001033, "medicos_totais": 31, "unidades": 6, "categoria": "critico", "categoria_micro": "critico"}, {"id": 53, "label": "Jiqui\u00e1", "x": 3172.3137940200886, "y": 5471.179820544208, "microrregiao": "5.2", "indice_ocde": 0.4979, "indice_micro": 0.5877, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.001743, "medicos_totais": 21, "unidades": 3, "categoria": "critico", "categoria_micro": "regular"}, {"id": 54, "label": "Jord\u00e3o", "x": 3230.262128210227, "y": 6983.930260539496, "microrregiao": "6.2", "indice_ocde": 0.2794, "indice_micro": 0.2732, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.000978, "medicos_totais": 20, "unidades": 4, "categoria": "critico", "categoria_micro": "critico"}, {"id": 55, "label": "Linha do Tiro", "x": 3324.0208908440814, "y": 2746.0087218808007, "microrregiao": "2.2 / 2.3", "indice_ocde": 0.3621, "indice_micro": 0.3394, "medicos_por_unidade": 6.0, "proporcao_medico_pop": 0.001267, "medicos_totais": 18, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 56, "label": "Macaxeira", "x": 2169.624428818185, "y": 3644.665532927338, "microrregiao": "3.3", "indice_ocde": 0.2271, "indice_micro": 0.3586, "medicos_por_unidade": 8.0, "proporcao_medico_pop": 0.000795, "medicos_totais": 16, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 57, "label": "Madalena", "x": 4444.2851920189805, "y": 4027.5999911546246, "microrregiao": "4.1", "indice_ocde": 0.4867, "indice_micro": 0.4792, "medicos_por_unidade": 7.33, "proporcao_medico_pop": 0.001703, "medicos_totais": 44, "unidades": 6, "categoria": "critico", "categoria_micro": "critico"}, {"id": 58, "label": "Mangabeira", "x": 746.0519884050649, "y": 4197.940834982333, "microrregiao": "3.2", "indice_ocde": 0.4466, "indice_micro": 0.5313, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.001563, "medicos_totais": 10, "unidades": 2, "categoria": "critico", "categoria_micro": "regular"}, {"id": 59, "label": "Mangueira", "x": 1678.9444715555949, "y": 5266.7448954007905, "microrregiao": "5.1", "indice_ocde": 1.0811, "indice_micro": 0.7081, "medicos_por_unidade": 7.25, "proporcao_medico_pop": 0.003784, "medicos_totais": 29, "unidades": 4, "categoria": "bom", "categoria_micro": "regular"}, {"id": 60, "label": "Monteiro", "x": 5515.582047841599, "y": 2029.5399919298366, "microrregiao": "3.1", "indice_ocde": 0.2544, "indice_micro": 0.4937, "medicos_por_unidade": 6.0, "proporcao_medico_pop": 0.00089, "medicos_totais": 6, "unidades": 1, "categoria": "critico", "categoria_micro": "critico"}, {"id": 61, "label": "Morro da Concei\u00e7\u00e3o", "x": 1309.0909412173794, "y": 3954.7116375424735, "microrregiao": "3.2", "indice_ocde": 0.9736, "indice_micro": 0.5313, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.003408, "medicos_totais": 28, "unidades": 4, "categoria": "regular", "categoria_micro": "regular"}, {"id": 62, "label": "Mustardinha", "x": 1710.6540603602186, "y": 5707.482422405924, "microrregiao": "5.1", "indice_ocde": 1.0471, "indice_micro": 0.7081, "medicos_por_unidade": 6.5, "proporcao_medico_pop": 0.003665, "medicos_totais": 39, "unidades": 6, "categoria": "bom", "categoria_micro": "regular"}, {"id": 63, "label": "Nova Descoberta", "x": 2140.8206905165025, "y": 4354.036845348543, "microrregiao": "3.3", "indice_ocde": 0.1792, "indice_micro": 0.3586, "medicos_por_unidade": 9.0, "proporcao_medico_pop": 0.000627, "medicos_totais": 18, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 64, "label": "Paissandu", "x": 2881.423680737044, "y": 963.2311848725025, "microrregiao": "1.2", "indice_ocde": 10.5634, "indice_micro": 2.0145, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.036972, "medicos_totais": 21, "unidades": 3, "categoria": "excelente", "categoria_micro": "excelente"}, {"id": 65, "label": "Parnamirim", "x": 4711.639063472099, "y": 3128.773610918011, "microrregiao": "3.1", "indice_ocde": 0.2465, "indice_micro": 0.4937, "medicos_por_unidade": 3.0, "proporcao_medico_pop": 0.000863, "medicos_totais": 6, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 66, "label": "Passarinho", "x": 2838.9896315851365, "y": 4314.162350941599, "microrregiao": "3.3", "indice_ocde": 0.1528, "indice_micro": 0.3586, "medicos_por_unidade": 6.5, "proporcao_medico_pop": 0.000535, "medicos_totais": 13, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 67, "label": "Pau-ferro", "x": 2537.8009599204042, "y": 3604.6949445297996, "microrregiao": "3.3", "indice_ocde": 25.6822, "indice_micro": 0.3586, "medicos_por_unidade": 8.0, "proporcao_medico_pop": 0.089888, "medicos_totais": 8, "unidades": 1, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 68, "label": "Peixinhos", "x": 231.34024937619262, "y": 2080.9136043970784, "microrregiao": "2.1", "indice_ocde": 2.5484, "indice_micro": 0.4144, "medicos_por_unidade": 8.67, "proporcao_medico_pop": 0.008919, "medicos_totais": 26, "unidades": 3, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 69, "label": "Pina", "x": 1614.2927614475468, "y": 7309.143941555598, "microrregiao": "6.1", "indice_ocde": 0.2447, "indice_micro": 0.201, "medicos_por_unidade": 4.17, "proporcao_medico_pop": 0.000856, "medicos_totais": 25, "unidades": 6, "categoria": "critico", "categoria_micro": "critico"}, {"id": 70, "label": "Ponto de Parada", "x": 630.5669785671166, "y": 2051.140332069672, "microrregiao": "2.1", "indice_ocde": 1.1995, "indice_micro": 0.4144, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.004198, "medicos_totais": 10, "unidades": 2, "categoria": "bom", "categoria_micro": "critico"}, {"id": 71, "label": "Porto da Madeira", "x": 2488.1710369026573, "y": 2503.6970330408794, "microrregiao": "2.2", "indice_ocde": 0.9678, "indice_micro": 0.3394, "medicos_por_unidade": 7.33, "proporcao_medico_pop": 0.003387, "medicos_totais": 22, "unidades": 3, "categoria": "regular", "categoria_micro": "critico"}, {"id": 72, "label": "Po\u00e7o", "x": 5219.499318346276, "y": 1831.4335555756716, "microrregiao": "3.1", "indice_ocde": 0.3609, "indice_micro": 0.4937, "medicos_por_unidade": 3.5, "proporcao_medico_pop": 0.001263, "medicos_totais": 7, "unidades": 2, "categoria": "critico", "categoria_micro": "critico"}, {"id": 73, "label": "Prado", "x": 3924.310283607399, "y": 3589.842746111519, "microrregiao": "4.1", "indice_ocde": 1.0766, "indice_micro": 0.4792, "medicos_por_unidade": 8.6, "proporcao_medico_pop": 0.003768, "medicos_totais": 43, "unidades": 5, "categoria": "bom", "categoria_micro": "critico"}, {"id": 74, "label": "Recife", "x": 697.0993086009032, "y": 1013.1102957270099, "microrregiao": "1.1", "indice_ocde": 26.4061, "indice_micro": 1.0025, "medicos_por_unidade": 5.56, "proporcao_medico_pop": 0.092421, "medicos_totais": 50, "unidades": 9, "categoria": "excelente", "categoria_micro": "bom"}, {"id": 75, "label": "Rosarinho", "x": 865.7358626433842, "y": 2216.351248546314, "microrregiao": "2.1", "indice_ocde": 0.1179, "indice_micro": 0.4144, "medicos_por_unidade": 3.0, "proporcao_medico_pop": 0.000413, "medicos_totais": 3, "unidades": 1, "categoria": "critico", "categoria_micro": "critico"}, {"id": 76, "label": "San Martin", "x": 2091.9645042459774, "y": 5175.96109114242, "microrregiao": "5.1", "indice_ocde": 0.5696, "indice_micro": 0.7081, "medicos_por_unidade": 6.57, "proporcao_medico_pop": 0.001994, "medicos_totais": 46, "unidades": 7, "categoria": "regular", "categoria_micro": "regular"}, {"id": 77, "label": "Sancho", "x": 4651.059947781501, "y": 5276.690105327368, "microrregiao": "5.3", "indice_ocde": 0.4475, "indice_micro": 0.4444, "medicos_por_unidade": 6.67, "proporcao_medico_pop": 0.001566, "medicos_totais": 20, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 78, "label": "Santana", "x": 5605.7410139445865, "y": 2732.5458078231436, "microrregiao": "3.1", "indice_ocde": 0.555, "indice_micro": 0.4937, "medicos_por_unidade": 5.0, "proporcao_medico_pop": 0.001943, "medicos_totais": 5, "unidades": 1, "categoria": "regular", "categoria_micro": "critico"}, {"id": 79, "label": "Santo Amaro", "x": 1233.0114732596578, "y": 972.021738445156, "microrregiao": "1.1", "indice_ocde": 0.4955, "indice_micro": 1.0025, "medicos_por_unidade": 4.7, "proporcao_medico_pop": 0.001734, "medicos_totais": 47, "unidades": 10, "categoria": "critico", "categoria_micro": "bom"}, {"id": 80, "label": "Santo Ant\u00f4nio", "x": 2406.033519709091, "y": 1428.182386423623, "microrregiao": "1.2", "indice_ocde": 28.124, "indice_micro": 2.0145, "medicos_por_unidade": 4.89, "proporcao_medico_pop": 0.098434, "medicos_totais": 44, "unidades": 9, "categoria": "excelente", "categoria_micro": "excelente"}, {"id": 81, "label": "Soledade", "x": 2090.2958455828903, "y": 815.2127852024389, "microrregiao": "1.2", "indice_ocde": 3.0205, "indice_micro": 2.0145, "medicos_por_unidade": 7.33, "proporcao_medico_pop": 0.010572, "medicos_totais": 22, "unidades": 3, "categoria": "excelente", "categoria_micro": "excelente"}, {"id": 82, "label": "S\u00e3o Jos\u00e9", "x": 2401.1242793799033, "y": 596.9820228091198, "microrregiao": "1.2", "indice_ocde": 2.1245, "indice_micro": 2.0145, "medicos_por_unidade": 6.6, "proporcao_medico_pop": 0.007436, "medicos_totais": 66, "unidades": 10, "categoria": "excelente", "categoria_micro": "excelente"}, {"id": 83, "label": "S\u00edtio dos Pintos", "x": 4292.04406220407, "y": 2508.926568387591, "microrregiao": "3.1", "indice_ocde": 0.1429, "indice_micro": 0.4937, "medicos_por_unidade": 4.0, "proporcao_medico_pop": 0.0005, "medicos_totais": 4, "unidades": 1, "categoria": "critico", "categoria_micro": "critico"}, {"id": 84, "label": "Tamarineira", "x": 5299.442690778746, "y": 3086.9319653706166, "microrregiao": "3.1", "indice_ocde": 0.6908, "indice_micro": 0.4937, "medicos_por_unidade": 6.4, "proporcao_medico_pop": 0.002418, "medicos_totais": 32, "unidades": 5, "categoria": "regular", "categoria_micro": "critico"}, {"id": 85, "label": "Tejipi\u00f3", "x": 4941.7068835032105, "y": 5911.572419230973, "microrregiao": "5.3", "indice_ocde": 0.8134, "indice_micro": 0.4444, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.002847, "medicos_totais": 28, "unidades": 4, "categoria": "regular", "categoria_micro": "critico"}, {"id": 86, "label": "Torre", "x": 4228.535625958491, "y": 4273.760932202296, "microrregiao": "4.1", "indice_ocde": 0.438, "indice_micro": 0.4792, "medicos_por_unidade": 6.4, "proporcao_medico_pop": 0.001533, "medicos_totais": 32, "unidades": 5, "categoria": "critico", "categoria_micro": "critico"}, {"id": 87, "label": "Torre\u00e3o", "x": 568.6327402151455, "y": 2933.8103469928865, "microrregiao": "2.1", "indice_ocde": 1.2771, "indice_micro": 0.4144, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.00447, "medicos_totais": 7, "unidades": 1, "categoria": "bom", "categoria_micro": "critico"}, {"id": 88, "label": "Torr\u00f5es", "x": 5716.9212518468385, "y": 4026.0602165257233, "microrregiao": "4.2", "indice_ocde": 0.1468, "indice_micro": 0.2859, "medicos_por_unidade": 5.33, "proporcao_medico_pop": 0.000514, "medicos_totais": 16, "unidades": 3, "categoria": "critico", "categoria_micro": "critico"}, {"id": 89, "label": "Tot\u00f3", "x": 5413.6228091454705, "y": 5547.311576397937, "microrregiao": "5.3", "indice_ocde": 3.444, "indice_micro": 0.4444, "medicos_por_unidade": 4.17, "proporcao_medico_pop": 0.012054, "medicos_totais": 25, "unidades": 6, "categoria": "excelente", "categoria_micro": "critico"}, {"id": 90, "label": "Vasco da Gama", "x": 673.196822583964, "y": 3782.437090348288, "microrregiao": "3.2", "indice_ocde": 0.3111, "indice_micro": 0.5313, "medicos_por_unidade": 7.25, "proporcao_medico_pop": 0.001089, "medicos_totais": 29, "unidades": 4, "categoria": "critico", "categoria_micro": "regular"}, {"id": 91, "label": "V\u00e1rzea", "x": 762.8941783811155, "y": 5540.542001300612, "microrregiao": "4.3", "indice_ocde": 0.1329, "indice_micro": 0.2442, "medicos_por_unidade": 5.5, "proporcao_medico_pop": 0.000465, "medicos_totais": 33, "unidades": 6, "categoria": "critico", "categoria_micro": "critico"}, {"id": 92, "label": "Zumbi", "x": 3890.3117218838192, "y": 4376.494531592119, "microrregiao": "4.1", "indice_ocde": 1.6796, "indice_micro": 0.4792, "medicos_por_unidade": 7.0, "proporcao_medico_pop": 0.005879, "medicos_totais": 28, "unidades": 4, "categoria": "bom", "categoria_micro": "critico"}, {"id": 93, "label": "\u00c1gua Fria", "x": 1806.2627839344818, "y": 2130.0199172049906, "microrregiao": "2.2", "indice_ocde": 0.0293, "indice_micro": 0.3394, "medicos_por_unidade": 4.0, "proporcao_medico_pop": 0.000103, "medicos_totais": 4, "unidades": 1, "categoria": "critico", "categoria_micro": "critico"}];
        const edges = [{"from": 3, "to": 58, "label": "Rua Aripibu", "peso": 29.85}, {"from": 57, "to": 73, "label": "Praca Na Rua Joao Crescencio", "peso": 37.33}, {"from": 36, "to": 38, "label": "Rua Conselheiro Portela", "peso": 39.05}, {"from": 1, "to": 62, "label": "Rua Orlandia", "peso": 39.93}, {"from": 4, "to": 13, "label": "Rua Alto do Tiro", "peso": 41.0}, {"from": 21, "to": 70, "label": "Rua Professor Jeronimo Gueiros", "peso": 47.09}, {"from": 15, "to": 69, "label": "Rua Dentudo", "peso": 51.9}, {"from": 22, "to": 60, "label": "Rua Iguatama", "peso": 57.87}, {"from": 17, "to": 66, "label": "Avenida Presidente Cafe Filho", "peso": 58.0}, {"from": 35, "to": 66, "label": "Rua Vale Fundo", "peso": 58.94}, {"from": 56, "to": 63, "label": "Rua Nage", "peso": 62.85}, {"from": 5, "to": 60, "label": "Rua Tramandai", "peso": 66.33}, {"from": 31, "to": 52, "label": "Rua Raphael De Oliveira Alves", "peso": 68.49}, {"from": 3, "to": 13, "label": "Rua Campos Belos", "peso": 69.54}, {"from": 4, "to": 2, "label": "Rua Arlindo Cisneiros", "peso": 72.0}, {"from": 4, "to": 55, "label": "Rua Arlindo Cisneiros", "peso": 72.0}, {"from": 47, "to": 45, "label": "Avenida Beira Rio", "peso": 76.03}, {"from": 93, "to": 13, "label": "Rua Turiuba", "peso": 76.43}, {"from": 30, "to": 88, "label": "Rua Daniel Lisboa", "peso": 81.91}, {"from": 16, "to": 32, "label": "Rua Assaituba", "peso": 84.27}, {"from": 79, "to": 80, "label": "Rua Princesa Isabel", "peso": 91.36}, {"from": 80, "to": 82, "label": "Rua Do Porao", "peso": 94.58}, {"from": 17, "to": 35, "label": "Rua Izaltino Lobo", "peso": 95.66}, {"from": 38, "to": 41, "label": "Rua Conselheiro Portela", "peso": 100.77}, {"from": 39, "to": 53, "label": "Rua Cassiano", "peso": 102.45}, {"from": 28, "to": 9, "label": "Rua Jos\u00e9 Caetano", "peso": 108.0}, {"from": 28, "to": 44, "label": "Rua Jos\u00e9 Caetano", "peso": 108.0}, {"from": 17, "to": 63, "label": "Rua Urandi", "peso": 108.15}, {"from": 31, "to": 89, "label": "Rua Garcia", "peso": 108.58}, {"from": 6, "to": 56, "label": "Rua Do Banho", "peso": 109.77}, {"from": 21, "to": 43, "label": "Rua Padre Villemain", "peso": 113.6}, {"from": 16, "to": 66, "label": "Avenida Presidente Cafe Filho", "peso": 114.06}, {"from": 4, "to": 3, "label": "Rua Arlindo Cisneiros", "peso": 115.0}, {"from": 44, "to": 54, "label": "Rua Boquira", "peso": 115.52}, {"from": 26, "to": 91, "label": "Rua Barao De Mamore", "peso": 116.77}, {"from": 75, "to": 84, "label": "Rua Capitao Sampaio Xavier", "peso": 117.37}, {"from": 2, "to": 3, "label": "Rua Corrego Jose Grande", "peso": 120.48}, {"from": 16, "to": 63, "label": "Rua Teolandia", "peso": 121.67}, {"from": 57, "to": 92, "label": "Rua Joao Da Mata", "peso": 123.82}, {"from": 36, "to": 41, "label": "Rua Conselheiro Portela", "peso": 124.63}, {"from": 63, "to": 90, "label": "Rua Bemposta", "peso": 124.87}, {"from": 29, "to": 89, "label": "Rua Escada", "peso": 128.39}, {"from": 36, "to": 87, "label": "Rua Natividade Saldanha", "peso": 128.73}, {"from": 52, "to": 85, "label": "Rua Iraguacu", "peso": 131.23}, {"from": 41, "to": 51, "label": "Rua Antonio Celso Uchoa Cavalcanti", "peso": 132.18}, {"from": 16, "to": 17, "label": "Avenida Presidente Cafe Filho", "peso": 133.4}, {"from": 2, "to": 90, "label": "Rua Aratuba", "peso": 135.17}, {"from": 9, "to": 85, "label": "Rua Capy", "peso": 135.95}, {"from": 10, "to": 55, "label": "Avenida Hildebrando De Vasconcelos", "peso": 142.86}, {"from": 2, "to": 17, "label": "Rua Uriel De Holanda", "peso": 143.9}, {"from": 12, "to": 81, "label": "Rua Bispo Cardoso Ayres", "peso": 144.74}, {"from": 35, "to": 55, "label": "Rua Izaltino Lobo", "peso": 144.74}, {"from": 93, "to": 40, "label": "Rua Contendas", "peso": 145.65}, {"from": 37, "to": 88, "label": "Rua Dr Miguel Vieira Ferreira", "peso": 148.89}, {"from": 17, "to": 55, "label": "Rua Izaltino Lobo", "peso": 154.96}, {"from": 41, "to": 75, "label": "Rua Teles Junior", "peso": 159.83}, {"from": 6, "to": 60, "label": "Rua Mandacaru", "peso": 160.86}, {"from": 33, "to": 47, "label": "Avenida Beira Rio", "peso": 161.09}, {"from": 33, "to": 57, "label": "Avenida Beira Rio", "peso": 161.09}, {"from": 23, "to": 65, "label": "Rua Da Harmonia", "peso": 168.23}, {"from": 8, "to": 13, "label": "Rua Professor Manuel Torres", "peso": 168.69}, {"from": 1, "to": 14, "label": "Rua Professor Celestin Malzac", "peso": 171.82}, {"from": 57, "to": 86, "label": "Avenida Beira Rio", "peso": 177.05}, {"from": 7, "to": 9, "label": "Rua Armando Sales De Oliveira", "peso": 177.53}, {"from": 74, "to": 80, "label": "Ponte Maur\u00edcio de Nassau", "peso": 180.0}, {"from": 11, "to": 69, "label": "Rua Delegado Tercio Soares De Aquino", "peso": 182.89}, {"from": 22, "to": 61, "label": "Rua Joaquim Teixeira", "peso": 188.34}, {"from": 11, "to": 48, "label": "Rua Capitao Vicente Da Mota", "peso": 193.4}, {"from": 22, "to": 23, "label": "Rua Joao Barbalho", "peso": 194.98}, {"from": 74, "to": 82, "label": "Ponte 12 de Setembro", "peso": 195.0}, {"from": 65, "to": 84, "label": "Rua Albino Meira", "peso": 196.16}, {"from": 20, "to": 68, "label": "Rua Jornalista Paulo Matos", "peso": 196.42}, {"from": 43, "to": 70, "label": "Rua Costa Pinto", "peso": 196.92}, {"from": 5, "to": 56, "label": "Rua Aroeira", "peso": 202.19}, {"from": 39, "to": 52, "label": "Rua Alfredo Vieira De Melo", "peso": 205.71}, {"from": 8, "to": 58, "label": "Rua Jacob", "peso": 206.67}, {"from": 14, "to": 62, "label": "Rua Itapolis", "peso": 206.94}, {"from": 62, "to": 76, "label": "Rua Itaquari", "peso": 210.23}, {"from": 0, "to": 41, "label": "Rua Teles Junior", "peso": 212.27}, {"from": 12, "to": 33, "label": "Rua Paissandu", "peso": 212.41}, {"from": 12, "to": 27, "label": "Rua Jornalista Edmundo Bittencourt", "peso": 213.19}, {"from": 32, "to": 56, "label": "Rua Trajano De Morais", "peso": 214.3}, {"from": 51, "to": 84, "label": "Rua Simao Mendes", "peso": 221.7}, {"from": 29, "to": 85, "label": "Rua Tutoia", "peso": 222.82}, {"from": 22, "to": 84, "label": "Rua Desembargador Gois Cavalcante", "peso": 224.14}, {"from": 8, "to": 21, "label": "Rua Petronila Botelho", "peso": 229.73}, {"from": 0, "to": 36, "label": "Rua Samuel Campelo", "peso": 231.42}, {"from": 36, "to": 75, "label": "Rua Teles Junior", "peso": 232.62}, {"from": 18, "to": 82, "label": "Rua Bom Sucesso", "peso": 235.15}, {"from": 7, "to": 39, "label": "Rua Dr Adelino Filho", "peso": 242.09}, {"from": 41, "to": 84, "label": "Rua Capitao Sampaio Xavier", "peso": 244.62}, {"from": 72, "to": 60, "label": "Estrada do Encanamento", "peso": 245.0}, {"from": 46, "to": 64, "label": "Rua Dr Joao Asfora", "peso": 246.51}, {"from": 14, "to": 73, "label": "Rua Professor Mario Ramos", "peso": 248.83}, {"from": 19, "to": 20, "label": "Rua Nadia", "peso": 254.48}, {"from": 0, "to": 38, "label": "Avenida Conselheiro Rosa E Silva", "peso": 263.32}, {"from": 36, "to": 70, "label": "Rua Costa Pinto", "peso": 265.9}, {"from": 13, "to": 58, "label": "Rua Jacob", "peso": 266.48}, {"from": 1, "to": 59, "label": "Rua Vereador Francisco De Paula Santana", "peso": 268.13}, {"from": 59, "to": 76, "label": "Rua Tanguara", "peso": 270.67}, {"from": 93, "to": 20, "label": "Rua Coronel Urbano Ribeiro De Sena", "peso": 272.88}, {"from": 10, "to": 71, "label": "Rua Dona Virtuosa De Lucena", "peso": 276.19}, {"from": 86, "to": 92, "label": "Rua Souza Bandeira", "peso": 277.3}, {"from": 61, "to": 90, "label": "Rua Corrego Do Ouro", "peso": 279.5}, {"from": 22, "to": 65, "label": "Rua Da Estrela", "peso": 280.12}, {"from": 40, "to": 71, "label": "Avenida Anibal Benevolo", "peso": 287.89}, {"from": 36, "to": 43, "label": "Rua Costa Pinto", "peso": 293.18}, {"from": 8, "to": 70, "label": "Rua Petronila Botelho", "peso": 294.86}, {"from": 17, "to": 90, "label": "Rua Grijalva Costa", "peso": 298.99}, {"from": 27, "to": 80, "label": "Rua Doutor Jose Mariano", "peso": 299.14}, {"from": 74, "to": 79, "label": "Ponte do Limoeiro", "peso": 300.0}, {"from": 21, "to": 87, "label": "Rua Da Fronteira", "peso": 309.43}, {"from": 51, "to": 65, "label": "Rua Muniz Tavares", "peso": 311.31}, {"from": 19, "to": 71, "label": "Rua Para", "peso": 315.29}, {"from": 47, "to": 57, "label": "Rua Joao Ivo Da Silva", "peso": 321.53}, {"from": 6, "to": 34, "label": "Entrada Br 101-Avenida Norte", "peso": 325.98}, {"from": 30, "to": 92, "label": "Rua Padre Leonardo Greco", "peso": 330.27}, {"from": 12, "to": 80, "label": "Rua Princesa Isabel", "peso": 334.97}, {"from": 48, "to": 49, "label": "Rua Jose Fernandes Portugal", "peso": 338.65}, {"from": 33, "to": 64, "label": "Rua Viscondessa Do Livramento", "peso": 340.09}, {"from": 29, "to": 77, "label": "Rua Paulino De Farias", "peso": 343.94}, {"from": 21, "to": 36, "label": "Rua Cristovao Jaques", "peso": 344.86}, {"from": 5, "to": 6, "label": "Rua Massaranduba", "peso": 348.17}, {"from": 12, "to": 79, "label": "Rua Do Principe", "peso": 355.79}, {"from": 72, "to": 22, "label": "Rua Engenheiro Oscar Ferreira", "peso": 363.0}, {"from": 12, "to": 64, "label": "Rua General Joaquim Inacio", "peso": 363.79}, {"from": 27, "to": 46, "label": "Rua Jose De Alencar", "peso": 367.04}, {"from": 70, "to": 75, "label": "Rua Almirante Noronha De Carvalho", "peso": 372.98}, {"from": 53, "to": 76, "label": "Rua Cordelia Gois Silva", "peso": 373.33}, {"from": 79, "to": 81, "label": "Rua Bispo Cardoso Ayres", "peso": 377.79}, {"from": 30, "to": 37, "label": "Rua Bom Pastor", "peso": 378.02}, {"from": 93, "to": 8, "label": "Rua Sao Bento", "peso": 379.35}, {"from": 78, "to": 86, "label": "Avenida Beira Rio", "peso": 384.28}, {"from": 2, "to": 55, "label": "Rua Gustavo Barrozo", "peso": 385.65}, {"from": 2, "to": 61, "label": "Rua Corrego Do Ouro", "peso": 394.34}, {"from": 77, "to": 85, "label": "Rua Matoso Da Camara", "peso": 399.87}, {"from": 93, "to": 71, "label": "Rua Conselheiro Barros Barreto", "peso": 413.84}, {"from": 77, "to": 89, "label": "Rua Do Nascente", "peso": 420.9}, {"from": 1, "to": 53, "label": "Rua Bom Jardim", "peso": 424.78}, {"from": 30, "to": 50, "label": "Avenida Camarao", "peso": 428.68}, {"from": 33, "to": 41, "label": "Rua Guilherme Pinto", "peso": 437.43}, {"from": 72, "to": 23, "label": "Estrada do Encanamento", "peso": 444.0}, {"from": 32, "to": 63, "label": "Rua Alto Santa Luzia", "peso": 448.61}, {"from": 12, "to": 46, "label": "Rua Visconde De Goiana", "peso": 450.56}, {"from": 73, "to": 92, "label": "Rua Caratinga", "peso": 457.11}, {"from": 31, "to": 76, "label": "Rua Dr Flavio Ferreira Da Silva Marojo", "peso": 475.99}, {"from": 26, "to": 50, "label": "Rua Mauriceia", "peso": 484.48}, {"from": 14, "to": 76, "label": "Rua Acajutiba", "peso": 488.14}, {"from": 48, "to": 69, "label": "Rua Sao Jose", "peso": 504.4}, {"from": 1, "to": 73, "label": "Rua Santa Edwirges", "peso": 534.89}, {"from": 19, "to": 40, "label": "Avenida Nova Do Fundao", "peso": 550.74}, {"from": 76, "to": 88, "label": "Avenida Recife", "peso": 559.87}, {"from": 83, "to": 34, "label": "Rua Dois Irm\u00e3os", "peso": 602.0}, {"from": 16, "to": 42, "label": "Avenida Embaixador Assis Chateaubriand", "peso": 603.06}, {"from": 26, "to": 37, "label": "Rua General Vargas", "peso": 609.94}, {"from": 31, "to": 88, "label": "Rua Vinte E Um De Abril", "peso": 620.72}, {"from": 5, "to": 22, "label": "Avenida Doutor Eurico Chaves", "peso": 632.25}, {"from": 53, "to": 59, "label": "Rua Bom Jardim", "peso": 645.29}, {"from": 5, "to": 63, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 655.79}, {"from": 51, "to": 78, "label": "Rua Leonardo Bezerra Cavalcanti", "peso": 666.14}, {"from": 69, "to": 82, "label": "Avenida Ant\u00f4nio de Goes", "peso": 700.0}, {"from": 31, "to": 37, "label": "Avenida Visconde De Sao Leopoldo", "peso": 708.99}, {"from": 65, "to": 78, "label": "Rua Leonardo Bezerra Cavalcanti", "peso": 709.22}, {"from": 4, "to": 93, "label": "Rua Tamboara", "peso": 718.0}, {"from": 44, "to": 48, "label": "Rua Goncalves De Magalhaes", "peso": 734.33}, {"from": 23, "to": 78, "label": "Avenida Dezessete De Agosto", "peso": 739.83}, {"from": 7, "to": 25, "label": "Rua Aurora Cacote", "peso": 752.91}, {"from": 8, "to": 20, "label": "Rua Expedicionario Jamil Dagli", "peso": 759.53}, {"from": 8, "to": 68, "label": "Rua Expedicionario Jamil Dagli", "peso": 771.42}, {"from": 59, "to": 62, "label": "Rua Vinte E Um De Abril", "peso": 783.53}, {"from": 21, "to": 79, "label": "Rua Projetada", "peso": 849.75}, {"from": 18, "to": 69, "label": "Ponte Governador Paulo Guerra", "peso": 850.0}, {"from": 20, "to": 40, "label": "Rua Coronel Urbano Ribeiro De Sena", "peso": 856.13}, {"from": 7, "to": 53, "label": "Avenida Central", "peso": 862.25}, {"from": 10, "to": 35, "label": "Avenida Rio Morno", "peso": 886.9}, {"from": 37, "to": 50, "label": "Rua General Vargas", "peso": 894.11}, {"from": 6, "to": 32, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 905.91}, {"from": 24, "to": 50, "label": "Rua Ministro Joao Alberto", "peso": 946.87}, {"from": 30, "to": 86, "label": "Rua Souza Bandeira", "peso": 965.6}, {"from": 3, "to": 61, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 966.85}, {"from": 45, "to": 82, "label": "Rua Cabo Eutropio", "peso": 987.16}, {"from": 50, "to": 91, "label": "Rua Emiliano Braga", "peso": 1015.78}, {"from": 52, "to": 76, "label": "Avenida Recife", "peso": 1069.97}, {"from": 8, "to": 84, "label": "Estrada Velha De Agua Fria", "peso": 1070.64}, {"from": 41, "to": 57, "label": "Avenida Beira Rio", "peso": 1079.0}, {"from": 1, "to": 47, "label": "Rua Padre Teofilo Tworz", "peso": 1094.38}, {"from": 47, "to": 73, "label": "Rua Padre Teofilo Tworz", "peso": 1118.1}, {"from": 38, "to": 87, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 1135.74}, {"from": 31, "to": 91, "label": "Rua Historiador Luiz Do Nascimento", "peso": 1139.6}, {"from": 12, "to": 38, "label": "Avenida Joao De Barros", "peso": 1172.63}, {"from": 26, "to": 31, "label": "Avenida Professor Luiz Freire", "peso": 1205.38}, {"from": 30, "to": 73, "label": "Avenida General San Martin", "peso": 1224.98}, {"from": 41, "to": 86, "label": "Avenida Beira Rio", "peso": 1240.84}, {"from": 31, "to": 77, "label": "Avenida Liberdade", "peso": 1260.98}, {"from": 22, "to": 58, "label": "Avenida Professor Jose Dos Anjos", "peso": 1291.58}, {"from": 11, "to": 54, "label": "Rua Canal Do Jordao", "peso": 1305.13}, {"from": 93, "to": 10, "label": "Avenida Anibal Benevolo", "peso": 1337.76}, {"from": 72, "to": 78, "label": "Avenida Dezessete de Agosto", "peso": 1360.0}, {"from": 34, "to": 42, "label": "Rua Limite De Municipio", "peso": 1360.47}, {"from": 25, "to": 49, "label": "Avenida Recife", "peso": 1452.3}, {"from": 93, "to": 55, "label": "Avenida Anibal Benevolo", "peso": 1475.7}, {"from": 21, "to": 68, "label": "Avenida Correia De Brito", "peso": 1553.3}, {"from": 38, "to": 79, "label": "Avenida Joao De Barros", "peso": 1596.38}, {"from": 31, "to": 85, "label": "Avenida Liberdade", "peso": 1619.99}, {"from": 1, "to": 18, "label": "Avenida Sul Gov. Cid Sampaio", "peso": 450.0}, {"from": 73, "to": 76, "label": "Avenida General San Martin", "peso": 1899.57}, {"from": 58, "to": 84, "label": "Avenida Professor Jose Dos Anjos", "peso": 1908.33}, {"from": 42, "to": 66, "label": "Rua Limite De Municipio", "peso": 1917.32}, {"from": 6, "to": 24, "label": "Avenida Da Recuperacao", "peso": 2015.43}, {"from": 7, "to": 52, "label": "Avenida Central", "peso": 2039.99}, {"from": 39, "to": 76, "label": "Avenida Recife", "peso": 2102.86}, {"from": 30, "to": 76, "label": "Avenida Engenheiro Abdias De Carvalho", "peso": 2139.0}, {"from": 52, "to": 53, "label": "Avenida Central", "peso": 2317.7}, {"from": 8, "to": 75, "label": "Avenida Professor Jose Dos Anjos", "peso": 2534.02}, {"from": 22, "to": 63, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 2916.34}, {"from": 9, "to": 52, "label": "Avenida Central", "peso": 3320.07}, {"from": 7, "to": 49, "label": "Avenida Recife", "peso": 3352.46}, {"from": 79, "to": 87, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 3421.94}, {"from": 3, "to": 22, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 3445.6}, {"from": 24, "to": 91, "label": "Avenida Caxanga", "peso": 3470.48}, {"from": 22, "to": 90, "label": "Avenida Norte Miguel Arraes De Alencar", "peso": 3686.43}, {"from": 12, "to": 41, "label": "Avenida Governador Agamenon Magalhaes", "peso": 3893.66}, {"from": 24, "to": 34, "label": "Avenida Da Recuperacao", "peso": 4094.03}, {"from": 44, "to": 49, "label": "Avenida Recife", "peso": 4394.66}, {"from": 25, "to": 44, "label": "Avenida Recife", "peso": 4514.06}, {"from": 1, "to": 82, "label": "Avenida Sul Gov. Cid Sampaio", "peso": 4529.21}, {"from": 67, "to": 42, "label": "Estrada do Orfanato", "peso": 4710.0}, {"from": 1, "to": 45, "label": "Avenida Central", "peso": 4928.92}, {"from": 32, "to": 34, "label": "Avenida Da Recuperacao", "peso": 5093.86}, {"from": 11, "to": 44, "label": "Avenida Marechal Mascarenhas De Moraes", "peso": 5557.85}, {"from": 7, "to": 44, "label": "Avenida Recife", "peso": 6414.22}, {"from": 1, "to": 48, "label": "Avenida Sul Gov. Cid Sampaio", "peso": 7645.21}, {"from": 32, "to": 42, "label": "Avenida Da Recuperacao", "peso": 8377.9}];
        const microregioes = [{"centro_x": 5004.628809393288, "centro_y": 2484.4183970663494, "raio": 817.031011868212, "indice": 0.4937, "categoria": "critico", "bairros": ["Casa Amarela", "Santana", "Alto do Mandu", "Tamarineira", "Derby", "Parnamirim", "Gra\u00e7as", "Jaqueira", "S\u00edtio dos Pintos", "Casa Forte", "Espinheiro", "Aflitos", "Apipucos", "Po\u00e7o", "Monteiro", "Dois Irm\u00e3os"]}, {"centro_x": 5001.687658885957, "centro_y": 5496.9861646641775, "raio": 534.6970228569372, "indice": 0.4444, "categoria": "critico", "bairros": ["Tot\u00f3", "Coqueiral", "Tejipi\u00f3", "Jardim S\u00e3o Paulo", "Sancho", "Barro", "Curado"]}, {"centro_x": 493.3654920495332, "centro_y": 2503.681051742035, "raio": 612.9914721434634, "indice": 0.4144, "categoria": "critico", "bairros": ["Arruda", "Encruzilhada", "Torre\u00e3o", "Campina do Barreto", "Hip\u00f3dromo", "Campo Grande", "Peixinhos", "Ponto de Parada", "Rosarinho"]}, {"centro_x": 4007.7812823615345, "centro_y": 3995.5416054315365, "raio": 565.0458214646309, "indice": 0.4792, "categoria": "critico", "bairros": ["Madalena", "Torre", "Zumbi", "Ilha do Retiro", "Cordeiro", "Prado", "Iputinga"]}, {"centro_x": 1506.155448050405, "centro_y": 6992.720781053063, "raio": 477.8613901189874, "indice": 0.201, "categoria": "critico", "bairros": ["Imbiribeira", "Pina", "Bras\u00edlia Teimosa", "Boa Viagem", "Ipsep"]}, {"centro_x": 991.0457398655893, "centro_y": 3990.1491203106634, "raio": 479.7001733054544, "indice": 0.5313, "categoria": "regular", "bairros": ["Morro da Concei\u00e7\u00e3o", "Alto Jos\u00e9 do Pinho", "Mangabeira", "Vasco da Gama", "Alto Jos\u00e9 Bonif\u00e1cio"]}, {"centro_x": 3999.127969977822, "centro_y": 1029.0750760797346, "raio": 408.0594739435146, "indice": 0.6129, "categoria": "regular", "bairros": ["Ilha Joana Bezerra", "Coelhos"]}, {"centro_x": 2536.153344639633, "centro_y": 2395.439933159295, "raio": 1392.4567022765934, "indice": 0.3394, "categoria": "critico", "bairros": ["Porto da Madeira", "Beberibe", "Fund\u00e3o", "Linha do Tiro", "Dois Unidos", "Alto Santa Teresinha", "\u00c1gua Fria", "Cajueiro", "Bomba do Hemet\u00e9rio"]}, {"centro_x": 2496.3885621464656, "centro_y": 4008.068974750676, "raio": 596.1071243405845, "indice": 0.3586, "categoria": "critico", "bairros": ["Brejo de Beberibe", "Passarinho", "C\u00f3rrego do Jenipapo", "Nova Descoberta", "Guabiraba", "Macaxeira", "Pau-ferro", "Brejo da Guabiraba"]}, {"centro_x": 5491.752347388769, "centro_y": 3994.44968148785, "raio": 327.37691496769855, "indice": 0.2859, "categoria": "critico", "bairros": ["Torr\u00f5es", "Engenho do Meio"]}, {"centro_x": 3492.5693259004784, "centro_y": 5509.099147727807, "raio": 448.51455477673846, "indice": 0.5877, "categoria": "regular", "bairros": ["Areias", "Est\u00e2ncia", "Jiqui\u00e1", "Ca\u00e7ote"]}, {"centro_x": 1991.8698052396164, "centro_y": 5495.843524909295, "raio": 489.1065370207303, "indice": 0.7081, "categoria": "regular", "bairros": ["Bongi", "Afogados", "Mustardinha", "Mangueira", "San Martin"]}, {"centro_x": 965.0553909302805, "centro_y": 992.5660170860829, "raio": 368.74249653187354, "indice": 1.0025, "categoria": "bom", "bairros": ["Santo Amaro", "Recife"]}, {"centro_x": 494.21939394779656, "centro_y": 5504.8418380397015, "raio": 390.7372235943232, "indice": 0.2442, "categoria": "critico", "bairros": ["V\u00e1rzea", "Caxang\u00e1", "Cidade Universit\u00e1ria"]}, {"centro_x": 2502.5643479819732, "centro_y": 996.426066834847, "raio": 550.3371753590516, "indice": 2.0145, "categoria": "excelente", "bairros": ["Paissandu", "Cabanga", "Santo Ant\u00f4nio", "Ilha do Leite", "Soledade", "S\u00e3o Jos\u00e9", "Boa Vista"]}, {"centro_x": 3519.3393246734117, "centro_y": 6971.886023827346, "raio": 389.32799579887376, "indice": 0.2732, "categoria": "critico", "bairros": ["Ibura", "Jord\u00e3o"]}, {"centro_x": 3499.125436154267, "centro_y": 2482.5271675473455, "raio": 427.13154767905934, "indice": 0.0, "categoria": "critico", "bairros": ["Beberibe", "Linha do Tiro", "Dois Unidos"]}, {"centro_x": 5000.0, "centro_y": 7000.0, "raio": 100, "indice": 0.1688, "categoria": "critico", "bairros": ["Cohab"]}];

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const tooltip = document.getElementById('tooltip');
        const selectMicro = document.getElementById('selectMicro');
        const btnResetFiltro = document.getElementById('btnResetFiltro');
        const inputBusca = document.getElementById('inputBusca');
        const btnRelatorio = document.getElementById('btnRelatorio');
        const painelRelatorio = document.getElementById('painelRelatorio');

        let offsetX = 0;
        let offsetY = 0;
        let scale = 1.0;
        let isDragging = false;
        let startX, startY;
        let bairroSelecionado = null;
        let microSelecionada = 'todas';
        let bairroBuscado = null;

        // Fun√ß√£o para calcular score de qualidade da conex√£o
        function calcularScoreConexao(indice1, indice2) {
            // M√©dia dos √≠ndices - quanto maior, melhor a conex√£o
            return (indice1 + indice2) / 2;
        }

        function getCategoriaConexao(fromNode, toNode) {
            const indice1 = fromNode.indice_ocde;
            const indice2 = toNode.indice_ocde;
            const ambosBonus = (indice1 >= 1.0 && indice2 >= 1.0);
            const ambosCriticos = (indice1 < 0.5 && indice2 < 0.5);
            const umBomUmRuim = (indice1 >= 1.0 && indice2 < 1.0) || (indice2 >= 1.0 && indice1 < 1.0);

            if (ambosBonus) return 'excelente';
            if (umBomUmRuim) return 'compensatoria';
            if (ambosCriticos) return 'critica';
            return 'regular';
        }

        function getCorConexao(categoria) {
            switch(categoria) {
                case 'excelente': return '#27ae60';
                case 'compensatoria': return '#3498db';
                case 'regular': return '#f39c12';
                case 'critica': return '#e74c3c';
                default: return '#999';
            }
        }

        btnRelatorio.addEventListener('click', () => {
            painelRelatorio.classList.add('aberto');
            gerarRelatorio();
        });

        function fecharPainel() {
            painelRelatorio.classList.remove('aberto');
        }

        function gerarRelatorio() {
            const conexoes = [];

            edges.forEach(edge => {
                const fromNode = nodes[edge.from];
                const toNode = nodes[edge.to];
                const categoria = getCategoriaConexao(fromNode, toNode);
                const score = calcularScoreConexao(fromNode.indice_ocde, toNode.indice_ocde);

                conexoes.push({
                    de: fromNode.label,
                    para: toNode.label,
                    indice_de: fromNode.indice_ocde,
                    indice_para: toNode.indice_ocde,
                    categoria: categoria,
                    score: score,
                    logradouro: edge.label
                });
            });

            // Separar por tipo
            const criticas = conexoes.filter(c => c.categoria === 'critica').sort((a, b) => a.score - b.score);
            const compensatorias = conexoes.filter(c => c.categoria === 'compensatoria').sort((a, b) => b.score - a.score);
            const excelentes = conexoes.filter(c => c.categoria === 'excelente').sort((a, b) => b.score - a.score);

            let html = `
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #e74c3c;">‚ö†Ô∏è Conex√µes Cr√≠ticas (${criticas.length})</h3>
                    <p style="font-size: 13px; color: #666;">Ambos bairros com √≠ndice OCDE abaixo de 0.5</p>
                </div>
            `;

            criticas.slice(0, 10).forEach(c => {
                html += `
                    <div class="relatorio-item">
                        <div class="relatorio-titulo">${c.de} ‚Üî ${c.para}</div>
                        <div class="relatorio-descricao">
                            √çndices: ${c.indice_de.toFixed(2)} ‚Üî ${c.indice_para.toFixed(2)}<br>
                            Logradouro: ${c.logradouro}<br>
                            <strong>Situa√ß√£o:</strong> Ambos abaixo do padr√£o OCDE - √°rea cr√≠tica
                        </div>
                    </div>
                `;
            });

            html += `
                <div style="margin: 30px 0 20px 0;">
                    <h3 style="color: #3498db;">üîÑ Conex√µes Compensat√≥rias (${compensatorias.length})</h3>
                    <p style="font-size: 13px; color: #666;">Um bairro bom conectado a um cr√≠tico/regular</p>
                </div>
            `;

            compensatorias.slice(0, 10).forEach(c => {
                const melhor = c.indice_de > c.indice_para ? c.de : c.para;
                const pior = c.indice_de > c.indice_para ? c.para : c.de;
                html += `
                    <div class="relatorio-item positiva">
                        <div class="relatorio-titulo">${c.de} ‚Üî ${c.para}</div>
                        <div class="relatorio-descricao">
                            √çndices: ${c.indice_de.toFixed(2)} ‚Üî ${c.indice_para.toFixed(2)}<br>
                            Logradouro: ${c.logradouro}<br>
                            <strong>Benef√≠cio:</strong> ${melhor} pode atender ${pior}
                        </div>
                    </div>
                `;
            });

            html += `
                <div style="margin: 30px 0 20px 0;">
                    <h3 style="color: #27ae60;">‚úÖ Conex√µes Excelentes (${excelentes.length})</h3>
                    <p style="font-size: 13px; color: #666;">Ambos bairros atendem ao padr√£o OCDE</p>
                </div>
            `;

            excelentes.slice(0, 5).forEach(c => {
                html += `
                    <div class="relatorio-item positiva">
                        <div class="relatorio-titulo">${c.de} ‚Üî ${c.para}</div>
                        <div class="relatorio-descricao">
                            √çndices: ${c.indice_de.toFixed(2)} ‚Üî ${c.indice_para.toFixed(2)}<br>
                            Logradouro: ${c.logradouro}<br>
                            <strong>Situa√ß√£o:</strong> Regi√£o bem servida de sa√∫de
                        </div>
                    </div>
                `;
            });

            document.getElementById('conteudoRelatorio').innerHTML = html;
        }

        // Popul ar dropdown de microrregi√µes
        const microregioesUnicas = [...new Set(nodes.map(n => n.microrregiao))].sort();
        microregioesUnicas.forEach(micro => {
            const option = document.createElement('option');
            option.value = micro;
            const microInfo = microregioes.find(m => m.bairros && m.bairros.includes(nodes.find(n => n.microrregiao === micro)?.label));
            const indice = microInfo ? microInfo.indice : 'N/A';
            option.textContent = `${micro} (√çndice: ${indice})`;
            selectMicro.appendChild(option);
        });

        selectMicro.addEventListener('change', (e) => {
            microSelecionada = e.target.value;
            bairroSelecionado = null;

            if (microSelecionada !== 'todas') {
                // Centralizar na microrregi√£o selecionada
                const microInfo = microregioes.find(m => {
                    const primeiroNo = nodes.find(n => {
                        const microPrincipal = n.microrregiao.includes(' / ')
                            ? n.microrregiao.split(' / ')[0].trim()
                            : n.microrregiao;
                        return microPrincipal === microSelecionada || n.microrregiao === microSelecionada;
                    });
                    return primeiroNo && m.bairros && m.bairros.includes(primeiroNo.label);
                });

                if (microInfo) {
                    offsetX = canvas.width / 2 - microInfo.centro_x * scale;
                    offsetY = canvas.height / 2 - microInfo.centro_y * scale;
                }
            }

            draw();
        });

        // Busca de bairro
        inputBusca.addEventListener('input', (e) => {
            const busca = e.target.value.trim().toLowerCase();
            if (busca.length === 0) {
                bairroBuscado = null;
                draw();
                return;
            }

            const bairroEncontrado = nodes.find(n =>
                n.label.toLowerCase().includes(busca)
            );

            if (bairroEncontrado) {
                bairroBuscado = bairroEncontrado.label;
                bairroSelecionado = bairroEncontrado.label;

                // Centralizar no bairro encontrado
                offsetX = canvas.width / 2 - bairroEncontrado.x * scale;
                offsetY = canvas.height / 2 - bairroEncontrado.y * scale;

                draw();
            } else {
                bairroBuscado = null;
                draw();
            }
        });

        btnResetFiltro.addEventListener('click', () => {
            microSelecionada = 'todas';
            selectMicro.value = 'todas';
            bairroSelecionado = null;
            bairroBuscado = null;
            inputBusca.value = '';
            scale = 1.0;
            offsetX = canvas.width / 2 - 3000;
            offsetY = canvas.height / 2 - 4000;
            draw();
        });

        function resizeCanvas() {
            const container = document.getElementById('canvasContainer');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            offsetX = canvas.width / 2 - 3000;
            offsetY = canvas.height / 2 - 4000;
            draw();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        let mouseDownX = 0;
        let mouseDownY = 0;
        let hasMoved = false;

        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseDownX = e.clientX - rect.left;
            mouseDownY = e.clientY - rect.top;
            hasMoved = false;
            isDragging = true;
            startX = e.clientX - offsetX;
            startY = e.clientY - offsetY;
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const rect = canvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;
                const distMoved = Math.sqrt(Math.pow(currentX - mouseDownX, 2) + Math.pow(currentY - mouseDownY, 2));

                if (distMoved > 5) {
                    hasMoved = true;
                    canvas.classList.add('dragging');
                    offsetX = e.clientX - startX;
                    offsetY = e.clientY - startY;
                    draw();
                }
            } else {
                handleMouseMove(e);
            }
        });

        canvas.addEventListener('mouseup', (e) => {
            if (!hasMoved) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = (e.clientX - rect.left - offsetX) / scale;
                const mouseY = (e.clientY - rect.top - offsetY) / scale;

                let clicouEmBairro = false;
                for (const node of nodes) {
                    const raio = calcularRaioNo();
                    const dx = mouseX - node.x;
                    const dy = mouseY - node.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < raio) {
                        if (bairroSelecionado === node.label) {
                            bairroSelecionado = null;
                        } else {
                            bairroSelecionado = node.label;
                        }
                        clicouEmBairro = true;
                        draw();
                        break;
                    }
                }

                if (!clicouEmBairro && bairroSelecionado) {
                    bairroSelecionado = null;
                    draw();
                }
            }

            isDragging = false;
            hasMoved = false;
            canvas.classList.remove('dragging');
        });

        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
            canvas.classList.remove('dragging');
            tooltip.style.display = 'none';
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            const worldX = (mouseX - offsetX) / scale;
            const worldY = (mouseY - offsetY) / scale;
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            const newScale = Math.max(0.1, Math.min(5, scale * delta));
            scale = newScale;
            offsetX = mouseX - worldX * scale;
            offsetY = mouseY - worldY * scale;
            draw();
        });

        function calcularRaioNo() {
            // Raio fixo para todos os n√≥s
            return 18;
        }

        function calcularRaioHalo(node) {
            // Calcular o "√≠ndice de criticidade" (inverso do √≠ndice OCDE)
            // Quanto menor o √≠ndice OCDE, maior o halo (mais cr√≠tico)
            // √çndice OCDE 1.0 = padr√£o m√≠nimo aceit√°vel

            if (node.indice_ocde >= 1.0) {
                // Se atende ao padr√£o, halo pequeno (proporcional ao quanto excede)
                const excesso = Math.min(node.indice_ocde, 5.0);
                return 25 + (excesso - 1.0) * 3; // De 25 a ~37 pixels
            } else {
                // Se n√£o atende, halo grande (inversamente proporcional)
                // Quanto mais pr√≥ximo de 0, maior o halo
                const criticidade = 1.0 - node.indice_ocde; // 0 a 1
                return 30 + criticidade * 50; // De 30 a 80 pixels
            }
        }

        function getCorCategoria(categoria) {
            switch(categoria) {
                case 'excelente': return '#27ae60';
                case 'bom': return '#3498db';
                case 'regular': return '#f39c12';
                case 'critico': return '#e74c3c';
                default: return '#95a5a6';
            }
        }

        function handleMouseMove(e) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = (e.clientX - rect.left - offsetX) / scale;
            const mouseY = (e.clientY - rect.top - offsetY) / scale;

            let found = false;
            for (const node of nodes) {
                const raio = calcularRaioNo();
                const dx = mouseX - node.x;
                const dy = mouseY - node.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < raio) {
                    tooltip.innerHTML = `
                        <div class="tooltip-title">${node.label}</div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">√çndice OCDE (Bairro):</span>
                            <strong>${node.indice_ocde}</strong>
                            (${node.indice_ocde >= 1.0 ? '‚úì Atende' : '‚úó N√£o atende'})
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">√çndice OCDE (Microrregi√£o):</span>
                            <strong>${node.indice_micro}</strong>
                            (${node.indice_micro >= 1.0 ? '‚úì Atende' : '‚úó N√£o atende'})
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">M√©dicos:</span> <strong>${node.medicos_totais}</strong>
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Unidades:</span> <strong>${node.unidades}</strong>
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">M√©dicos/Unidade:</span> <strong>${node.medicos_por_unidade}</strong>
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Propor√ß√£o M√©dico/Pop:</span> <strong>${node.proporcao_medico_pop}</strong>
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Microrregi√£o:</span> ${node.microrregiao}
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Categoria Bairro:</span> <strong>${node.categoria.toUpperCase()}</strong>
                        </div>
                        <div class="tooltip-row">
                            <span class="tooltip-label">Categoria Micro:</span> <strong>${node.categoria_micro.toUpperCase()}</strong>
                        </div>
                    `;
                    tooltip.style.left = (e.clientX + 15) + 'px';
                    tooltip.style.top = (e.clientY + 15) + 'px';
                    tooltip.style.display = 'block';
                    found = true;
                    break;
                }
            }

            if (!found) {
                tooltip.style.display = 'none';
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(offsetX, offsetY);
            ctx.scale(scale, scale);

            let vizinhosSet = null;
            let arestasVizinhos = new Set();

            if (bairroSelecionado) {
                vizinhosSet = new Set();
                vizinhosSet.add(bairroSelecionado);

                edges.forEach(edge => {
                    const fromNode = nodes[edge.from];
                    const toNode = nodes[edge.to];

                    if (fromNode.label === bairroSelecionado) {
                        vizinhosSet.add(toNode.label);
                        arestasVizinhos.add(`${edge.from}-${edge.to}`);
                    } else if (toNode.label === bairroSelecionado) {
                        vizinhosSet.add(fromNode.label);
                        arestasVizinhos.add(`${edge.from}-${edge.to}`);
                    }
                });
            }

            // Determinar quais n√≥s devem ser exibidos baseado no filtro
            const nodesFiltrados = microSelecionada === 'todas'
                ? nodes
                : nodes.filter(n => {
                    const microPrincipal = n.microrregiao.split(' / ')[0].trim();
                    return microPrincipal === microSelecionada || n.microrregiao === microSelecionada;
                });

            const labelsFiltrados = new Set(nodesFiltrados.map(n => n.label));

            // 1. DESENHAR HALOS DE MICRORREGI√ïES (camada de fundo)
            microregioes.forEach(micro => {
                // Filtrar: s√≥ desenhar halo se a microrregi√£o tem bairros vis√≠veis
                const temBairrosVisiveis = micro.bairros.some(b => labelsFiltrados.has(b));
                if (!temBairrosVisiveis && microSelecionada !== 'todas') return;

                const corMicro = getCorCategoria(micro.categoria);

                // Desenhar halo grande da microrregi√£o com gradiente radial
                const gradient = ctx.createRadialGradient(
                    micro.centro_x, micro.centro_y, micro.raio * 0.3,
                    micro.centro_x, micro.centro_y, micro.raio
                );

                gradient.addColorStop(0, corMicro + '00'); // Centro transparente
                gradient.addColorStop(0.6, corMicro + '15'); // Meio levemente vis√≠vel
                gradient.addColorStop(1, corMicro + '35'); // Borda mais vis√≠vel

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(micro.centro_x, micro.centro_y, micro.raio, 0, Math.PI * 2);
                ctx.fill();

                // Borda sutil da microrregi√£o
                ctx.strokeStyle = corMicro + '50';
                ctx.lineWidth = 2;
                ctx.setLineDash([10, 5]); // Linha tracejada
                ctx.beginPath();
                ctx.arc(micro.centro_x, micro.centro_y, micro.raio, 0, Math.PI * 2);
                ctx.stroke();
                ctx.setLineDash([]); // Resetar linha
            });

            // 2. Desenhar arestas
            edges.forEach(edge => {
                const fromNode = nodes[edge.from];
                const toNode = nodes[edge.to];

                // Filtrar arestas: s√≥ desenhar se ambos os n√≥s est√£o vis√≠veis
                if (!labelsFiltrados.has(fromNode.label) || !labelsFiltrados.has(toNode.label)) return;

                const chave = `${edge.from}-${edge.to}`;
                const categoriaConexao = getCategoriaConexao(fromNode, toNode);
                const corConexao = getCorConexao(categoriaConexao);

                if (vizinhosSet && arestasVizinhos.has(chave)) {
                    ctx.strokeStyle = '#4ecdc4';
                    ctx.lineWidth = 3;
                } else if (vizinhosSet) {
                    ctx.strokeStyle = '#ddd';
                    ctx.lineWidth = 0.5;
                } else {
                    // Usar cor baseada na qualidade da conex√£o
                    ctx.strokeStyle = corConexao;
                    ctx.lineWidth = categoriaConexao === 'critica' ? 2 : 1.5;
                    ctx.globalAlpha = categoriaConexao === 'critica' ? 0.8 : 0.6;
                }

                ctx.beginPath();
                ctx.moveTo(fromNode.x, fromNode.y);
                ctx.lineTo(toNode.x, toNode.y);
                ctx.stroke();
                ctx.globalAlpha = 1.0;
            });

            // 3. Desenhar n√≥s com halo individual
            nodes.forEach(node => {
                // Filtrar n√≥s: s√≥ desenhar se est√° vis√≠vel
                if (!labelsFiltrados.has(node.label)) return;

                const raioNo = calcularRaioNo();
                const raioHalo = calcularRaioHalo(node);
                let shouldDim = false;

                if (vizinhosSet && !vizinhosSet.has(node.label)) {
                    shouldDim = true;
                }

                // 3.1. Desenhar o halo individual do bairro (c√≠rculo maior, semitransparente)
                if (!shouldDim) {
                    const corHalo = getCorCategoria(node.categoria);
                    ctx.fillStyle = corHalo + '40'; // Adiciona transpar√™ncia (40 em hex = ~25% opacidade)
                    ctx.beginPath();
                    ctx.arc(node.x, node.y, raioHalo, 0, Math.PI * 2);
                    ctx.fill();

                    // Gradiente opcional para efeito de mapa de calor
                    const gradient = ctx.createRadialGradient(node.x, node.y, raioNo, node.x, node.y, raioHalo);
                    gradient.addColorStop(0, corHalo + '00'); // Centro transparente
                    gradient.addColorStop(0.5, corHalo + '30'); // Meio semitransparente
                    gradient.addColorStop(1, corHalo + '60'); // Borda mais opaca
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(node.x, node.y, raioHalo, 0, Math.PI * 2);
                    ctx.fill();
                }

                // 3.2. Desenhar o n√≥ principal (tamanho fixo)
                ctx.fillStyle = shouldDim ? '#d0d0d0' : getCorCategoria(node.categoria);
                ctx.beginPath();
                ctx.arc(node.x, node.y, raioNo, 0, Math.PI * 2);
                ctx.fill();

                // 3.3. Borda do n√≥
                ctx.strokeStyle = (vizinhosSet && node.label === bairroSelecionado) ? '#4ecdc4' : '#333';
                ctx.lineWidth = (vizinhosSet && node.label === bairroSelecionado) ? 4 : 2;
                ctx.beginPath();
                ctx.arc(node.x, node.y, raioNo, 0, Math.PI * 2);
                ctx.stroke();

                // 3.4. Label do bairro
                if (scale > 0.4) {
                    ctx.fillStyle = '#333';
                    ctx.font = 'bold 14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(node.label, node.x, node.y + raioNo + 18);
                }
            });

            ctx.restore();
        }

        draw();
    </script>
</body>
</html>